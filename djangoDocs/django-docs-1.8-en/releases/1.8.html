<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Django 1.8 release notes &mdash; Django 1.8.2.dev20150501205246 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.8.2.dev20150501205246',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Django 1.8.2.dev20150501205246 documentation" href="../index.html" />
    <link rel="up" title="Release notes" href="index.html" />
    <link rel="next" title="Django 1.7.8 release notes" href="1.7.8.html" />
    <link rel="prev" title="Django 1.8.1 release notes" href="1.8.1.html" />



 
<script type="text/javascript" src="../templatebuiltins.js"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>


  </head>
  <body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Django 1.8.2.dev20150501205246 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="1.8.1.html" title="Django 1.8.1 release notes">previous</a>
     |
    <a href="index.html" title="Release notes" accesskey="U">up</a>
   |
    <a href="1.7.8.html" title="Django 1.7.8 release notes">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="releases-1.8">
            
  <div class="section" id="s-django-1-8-release-notes">
<span id="django-1-8-release-notes"></span><h1>Django 1.8 release notes<a class="headerlink" href="#django-1-8-release-notes" title="Permalink to this headline">¶</a></h1>
<p><em>April 1, 2015</em></p>
<p>Welcome to Django 1.8!</p>
<p>These release notes cover the <a class="reference internal" href="#what-s-new-in-django-1-8">new features</a>, as well as some <a class="reference internal" href="#backwards-incompatible-changes-in-1-8">backwards
incompatible changes</a> you&#8217;ll want to be aware of when upgrading from Django
1.7 or older versions. We&#8217;ve also <a class="reference internal" href="#features-deprecated-in-1-8">begun the deprecation process for some
features</a>, and some features have reached the end of their deprecation process
and <a class="reference internal" href="#features-removed-in-1-8">have been removed</a>.</p>
<p>Django 1.8 has been designated as Django&#8217;s second <a class="reference internal" href="../internals/release-process.html#lts-releases"><em>&#8220;Long-Term Support&#8221;
(LTS)</em></a> release. It will receive security updates for at least
three years after its release. Support for the previous LTS, Django 1.4, will
end 6 months from the release date of Django 1.8.</p>
<div class="section" id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Python compatibility<a class="headerlink" href="#python-compatibility" title="Permalink to this headline">¶</a></h2>
<p>Like Django 1.7, Django 1.8 requires Python 2.7 or above, though we
<strong>highly recommend</strong> the latest minor release.</p>
</div>
<div class="section" id="s-what-s-new-in-django-1-8">
<span id="what-s-new-in-django-1-8"></span><h2>What&#8217;s new in Django 1.8<a class="headerlink" href="#what-s-new-in-django-1-8" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-model-meta-api">
<span id="model-meta-api"></span><h3><tt class="docutils literal"><span class="pre">Model._meta</span></tt> API<a class="headerlink" href="#model-meta-api" title="Permalink to this headline">¶</a></h3>
<p>Django now has a formalized API for <a class="reference internal" href="../ref/models/meta.html"><em>Model._meta</em></a>,
providing an officially supported way to <a class="reference internal" href="../ref/models/meta.html#model-meta-field-api"><em>retrieve fields</em></a> and filter fields based on their <a class="reference internal" href="../ref/models/fields.html#model-field-attributes"><em>attributes</em></a>.</p>
<p>The <tt class="docutils literal"><span class="pre">Model._meta</span></tt> object has been part of Django since the days of pre-0.96
&#8220;Magic Removal&#8221; &#8211; it just wasn&#8217;t an official, stable API. In recognition of
this, we&#8217;ve endeavored to maintain backwards-compatibility with the old
API endpoint where possible. However, API endpoints that aren&#8217;t part of the
new official API have been deprecated and will eventually be removed. A
<a class="reference internal" href="../ref/models/meta.html#migrating-old-meta-api"><em>guide to migrating from the old API to the new API</em></a> has been provided.</p>
</div>
<div class="section" id="s-multiple-template-engines">
<span id="multiple-template-engines"></span><h3>Multiple template engines<a class="headerlink" href="#multiple-template-engines" title="Permalink to this headline">¶</a></h3>
<p>Django 1.8 defines a stable API for integrating template backends. It includes
built-in support for the Django template language and for
<a class="reference internal" href="../topics/templates.html#django.template.backends.jinja2.Jinja2" title="django.template.backends.jinja2.Jinja2"><tt class="xref py py-class docutils literal"><span class="pre">Jinja2</span></tt></a>. It supports rendering
templates with multiple engines within the same project. Learn more about the
new features in the <a class="reference internal" href="../topics/templates.html"><em>topic guide</em></a> and check the
<a class="reference internal" href="../ref/templates/upgrading.html"><em>upgrade instructions</em></a> for details.</p>
</div>
<div class="section" id="s-security-enhancements">
<span id="security-enhancements"></span><h3>Security enhancements<a class="headerlink" href="#security-enhancements" title="Permalink to this headline">¶</a></h3>
<p>Several features of the <a class="reference external" href="https://pypi.python.org/pypi/django-secure">django-secure</a> third-party library have been
integrated into Django. <a class="reference internal" href="../ref/middleware.html#django.middleware.security.SecurityMiddleware" title="django.middleware.security.SecurityMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">django.middleware.security.SecurityMiddleware</span></tt></a>
provides several security enhancements to the request/response cycle. The new
<a class="reference internal" href="../ref/django-admin.html#django-admin-option---deploy"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--deploy</span></tt></a> option of the <a class="reference internal" href="../ref/django-admin.html#django-admin-check"><tt class="xref std std-djadmin docutils literal"><span class="pre">check</span></tt></a> command allows you to
check your production settings file for ways to increase the security of your
site.</p>
</div>
<div class="section" id="s-new-postgresql-specific-functionality">
<span id="new-postgresql-specific-functionality"></span><h3>New PostgreSQL specific functionality<a class="headerlink" href="#new-postgresql-specific-functionality" title="Permalink to this headline">¶</a></h3>
<p>Django now has a module with extensions for PostgreSQL specific features, such
as <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.ArrayField" title="django.contrib.postgres.fields.ArrayField"><tt class="xref py py-class docutils literal"><span class="pre">ArrayField</span></tt></a>,
<a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.HStoreField" title="django.contrib.postgres.fields.HStoreField"><tt class="xref py py-class docutils literal"><span class="pre">HStoreField</span></tt></a>, <a class="reference internal" href="../ref/contrib/postgres/fields.html#range-fields"><em>Range Fields</em></a>, and
<a class="reference internal" href="../ref/contrib/postgres/lookups.html#std:fieldlookup-unaccent"><tt class="xref std std-lookup docutils literal"><span class="pre">unaccent</span></tt></a> lookup. A full breakdown of the features is available
<a class="reference internal" href="../ref/contrib/postgres/index.html"><em>in the documentation</em></a>.</p>
</div>
<div class="section" id="s-new-data-types">
<span id="new-data-types"></span><h3>New data types<a class="headerlink" href="#new-data-types" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Django now has a <a class="reference internal" href="../ref/models/fields.html#django.db.models.UUIDField" title="django.db.models.UUIDField"><tt class="xref py py-class docutils literal"><span class="pre">UUIDField</span></tt></a> for storing
universally unique identifiers. It is stored as the native <tt class="docutils literal"><span class="pre">uuid</span></tt> data type
on PostgreSQL and as a fixed length character field on other backends. There
is a corresponding <a class="reference internal" href="../ref/forms/fields.html#django.forms.UUIDField" title="django.forms.UUIDField"><tt class="xref py py-class docutils literal"><span class="pre">form</span> <span class="pre">field</span></tt></a>.</li>
<li>Django now has a <a class="reference internal" href="../ref/models/fields.html#django.db.models.DurationField" title="django.db.models.DurationField"><tt class="xref py py-class docutils literal"><span class="pre">DurationField</span></tt></a> for storing periods
of time - modeled in Python by <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">timedelta</span></tt></a>. It is
stored in the native <tt class="docutils literal"><span class="pre">interval</span></tt> data type on PostgreSQL, as a <tt class="docutils literal"><span class="pre">INTERVAL</span>
<span class="pre">DAY(9)</span> <span class="pre">TO</span> <span class="pre">SECOND(6)</span></tt> on Oracle, and as a <tt class="docutils literal"><span class="pre">bigint</span></tt> of microseconds on other
backends. Date and time related arithmetic has also been improved on all
backends. There is a corresponding <a class="reference internal" href="../ref/forms/fields.html#django.forms.DurationField" title="django.forms.DurationField"><tt class="xref py py-class docutils literal"><span class="pre">form</span> <span class="pre">field</span></tt></a>.</li>
</ul>
</div>
<div class="section" id="s-query-expressions-conditional-expressions-and-database-functions">
<span id="query-expressions-conditional-expressions-and-database-functions"></span><h3>Query Expressions, Conditional Expressions, and Database Functions<a class="headerlink" href="#query-expressions-conditional-expressions-and-database-functions" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../ref/models/expressions.html"><em>Query Expressions</em></a> allow you to create,
customize, and compose complex SQL expressions. This has enabled annotate
to accept expressions other than aggregates. Aggregates are now able to
reference multiple fields, as well as perform arithmetic, similar to <tt class="docutils literal"><span class="pre">F()</span></tt>
objects. <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.order_by" title="django.db.models.query.QuerySet.order_by"><tt class="xref py py-meth docutils literal"><span class="pre">order_by()</span></tt></a> has also gained the
ability to accept expressions.</p>
<p><a class="reference internal" href="../ref/models/conditional-expressions.html"><em>Conditional Expressions</em></a> allow
you to use <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#if" title="(in Python v3.4)"><tt class="xref std std-keyword docutils literal"><span class="pre">if</span></tt></a> ... <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#elif" title="(in Python v3.4)"><tt class="xref std std-keyword docutils literal"><span class="pre">elif</span></tt></a> ... <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#else" title="(in Python v3.4)"><tt class="xref std std-keyword docutils literal"><span class="pre">else</span></tt></a> logic within
queries.</p>
<p>A collection of <a class="reference internal" href="../ref/models/database-functions.html"><em>database functions</em></a> is
also included with functionality such as
<a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Coalesce" title="django.db.models.functions.Coalesce"><tt class="xref py py-class docutils literal"><span class="pre">Coalesce</span></tt></a>,
<a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Concat" title="django.db.models.functions.Concat"><tt class="xref py py-class docutils literal"><span class="pre">Concat</span></tt></a>, and
<a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Substr" title="django.db.models.functions.Substr"><tt class="xref py py-class docutils literal"><span class="pre">Substr</span></tt></a>.</p>
</div>
<div class="section" id="s-testcase-data-setup">
<span id="testcase-data-setup"></span><h3><tt class="docutils literal"><span class="pre">TestCase</span></tt> data setup<a class="headerlink" href="#testcase-data-setup" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../topics/testing/tools.html#django.test.TestCase" title="django.test.TestCase"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a> has been refactored to allow for data
initialization at the class level using transactions and savepoints. Database
backends which do not support transactions, like MySQL with the MyISAM storage
engine, will still be able to run these tests but won&#8217;t benefit from the
improvements. Tests are now run within two nested
<a class="reference internal" href="../topics/db/transactions.html#django.db.transaction.atomic" title="django.db.transaction.atomic"><tt class="xref py py-func docutils literal"><span class="pre">atomic()</span></tt></a> blocks: one for the whole class and one
for each test.</p>
<ul class="simple">
<li>The class method
<a class="reference internal" href="../topics/testing/tools.html#django.test.TestCase.setUpTestData" title="django.test.TestCase.setUpTestData"><tt class="xref py py-meth docutils literal"><span class="pre">TestCase.setUpTestData()</span></tt></a> adds
the ability to setup test data at the class level. Using this technique can
speed up the tests as compared to using <tt class="docutils literal"><span class="pre">setUp()</span></tt>.</li>
<li>Fixture loading within <tt class="docutils literal"><span class="pre">TestCase</span></tt> is now performed once for the whole
<tt class="docutils literal"><span class="pre">TestCase</span></tt>.</li>
</ul>
</div>
<div class="section" id="s-minor-features">
<span id="minor-features"></span><h3>Minor features<a class="headerlink" href="#minor-features" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.admin</span></tt></a><a class="headerlink" href="#django-contrib-admin" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">ModelAdmin</span></tt></a> now has a
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.has_module_permission" title="django.contrib.admin.ModelAdmin.has_module_permission"><tt class="xref py py-meth docutils literal"><span class="pre">has_module_permission()</span></tt></a>
method to allow limiting access to the module on the admin index page.</li>
<li><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">InlineModelAdmin</span></tt></a> now has an attribute
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.InlineModelAdmin.show_change_link" title="django.contrib.admin.InlineModelAdmin.show_change_link"><tt class="xref py py-attr docutils literal"><span class="pre">show_change_link</span></tt></a> that
supports showing a link to an inline object&#8217;s change form.</li>
<li>Use the new <tt class="docutils literal"><span class="pre">django.contrib.admin.RelatedOnlyFieldListFilter</span></tt> in
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.list_filter" title="django.contrib.admin.ModelAdmin.list_filter"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.list_filter</span></tt></a>
to limit the <tt class="docutils literal"><span class="pre">list_filter</span></tt> choices to foreign objects which are attached to
those from the <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>.</li>
<li>The <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.delete_view" title="django.contrib.admin.ModelAdmin.delete_view"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.delete_view()</span></tt></a> displays a summary of objects
to be deleted on the deletion confirmation page.</li>
<li>The jQuery library embedded in the admin has been upgraded to version 1.11.2.</li>
<li>You can now specify <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.site_url" title="django.contrib.admin.AdminSite.site_url"><tt class="xref py py-attr docutils literal"><span class="pre">AdminSite.site_url</span></tt></a> in order to display a link to the
front-end site.</li>
<li>You can now specify <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.show_full_result_count" title="django.contrib.admin.ModelAdmin.show_full_result_count"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.show_full_result_count</span></tt></a> to control whether
or not the full count of objects should be displayed on a filtered admin page.</li>
<li>The <tt class="docutils literal"><span class="pre">AdminSite.password_change()</span></tt> method now has an <tt class="docutils literal"><span class="pre">extra_context</span></tt>
parameter.</li>
<li>You can now control who may login to the admin site by overriding only
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.has_permission" title="django.contrib.admin.AdminSite.has_permission"><tt class="xref py py-meth docutils literal"><span class="pre">AdminSite.has_permission()</span></tt></a> and
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.login_form" title="django.contrib.admin.AdminSite.login_form"><tt class="xref py py-attr docutils literal"><span class="pre">AdminSite.login_form</span></tt></a>.
The <tt class="docutils literal"><span class="pre">base.html</span></tt> template has a new block <tt class="docutils literal"><span class="pre">usertools</span></tt> which contains the
user-specific header. A new context variable <tt class="docutils literal"><span class="pre">has_permission</span></tt>, which gets
its value from <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.has_permission" title="django.contrib.admin.AdminSite.has_permission"><tt class="xref py py-meth docutils literal"><span class="pre">has_permission()</span></tt></a>,
indicates whether the user may access the site.</li>
<li>Foreign key dropdowns now have buttons for changing or deleting related
objects using a popup.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-admindocs">
<span id="django-contrib-admindocs"></span><h4><a class="reference internal" href="../ref/contrib/admin/admindocs.html#module-django.contrib.admindocs" title="django.contrib.admindocs: Django's admin documentation generator."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.admindocs</span></tt></a><a class="headerlink" href="#django-contrib-admindocs" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>reStructuredText is now parsed in model docstrings.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.auth</span></tt></a><a class="headerlink" href="#django-contrib-auth" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Authorization backends can now raise
<a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.PermissionDenied" title="django.core.exceptions.PermissionDenied"><tt class="xref py py-class docutils literal"><span class="pre">PermissionDenied</span></tt></a> in
<a class="reference internal" href="../ref/contrib/auth.html#django.contrib.auth.models.User.has_perm" title="django.contrib.auth.models.User.has_perm"><tt class="xref py py-meth docutils literal"><span class="pre">has_perm()</span></tt></a>
and <a class="reference internal" href="../ref/contrib/auth.html#django.contrib.auth.models.User.has_module_perms" title="django.contrib.auth.models.User.has_module_perms"><tt class="xref py py-meth docutils literal"><span class="pre">has_module_perms()</span></tt></a>
to short-circuit permission checking.</li>
<li><a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.PasswordResetForm" title="django.contrib.auth.forms.PasswordResetForm"><tt class="xref py py-class docutils literal"><span class="pre">PasswordResetForm</span></tt></a> now
has a method <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.PasswordResetForm.send_email" title="django.contrib.auth.forms.PasswordResetForm.send_email"><tt class="xref py py-meth docutils literal"><span class="pre">send_email()</span></tt></a>
that can be overridden to customize the mail to be sent.</li>
<li>The <tt class="docutils literal"><span class="pre">max_length</span></tt> of <a class="reference internal" href="../ref/contrib/auth.html#django.contrib.auth.models.Permission.name" title="django.contrib.auth.models.Permission.name"><tt class="xref py py-attr docutils literal"><span class="pre">Permission.name</span></tt></a> has been increased from 50 to
255 characters. Please run the database migration.</li>
<li><a class="reference internal" href="../topics/auth/customizing.html#django.contrib.auth.models.CustomUser.USERNAME_FIELD" title="django.contrib.auth.models.CustomUser.USERNAME_FIELD"><tt class="xref py py-attr docutils literal"><span class="pre">USERNAME_FIELD</span></tt></a> and
<a class="reference internal" href="../topics/auth/customizing.html#django.contrib.auth.models.CustomUser.REQUIRED_FIELDS" title="django.contrib.auth.models.CustomUser.REQUIRED_FIELDS"><tt class="xref py py-attr docutils literal"><span class="pre">REQUIRED_FIELDS</span></tt></a> now supports
<a class="reference internal" href="../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>s.</li>
<li>The default iteration count for the PBKDF2 password hasher has been
increased by 33%. This backwards compatible change will not affect users who
have subclassed <tt class="docutils literal"><span class="pre">django.contrib.auth.hashers.PBKDF2PasswordHasher</span></tt> to
change the default value.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.gis</span></tt></a><a class="headerlink" href="#django-contrib-gis" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>A new <a class="reference internal" href="../ref/contrib/gis/serializers.html"><em>GeoJSON serializer</em></a> is now
available.</li>
<li>It is now allowed to include a subquery as a geographic lookup argument, for
example <tt class="docutils literal"><span class="pre">City.objects.filter(point__within=Country.objects.filter(continent='Africa').values('mpoly'))</span></tt>.</li>
<li>The Spatialite backend now supports <tt class="docutils literal"><span class="pre">Collect</span></tt> and <tt class="docutils literal"><span class="pre">Extent</span></tt> aggregates
when the database version is 3.0 or later.</li>
<li>The PostGIS 2 <tt class="docutils literal"><span class="pre">CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">postgis</span></tt> and the Spatialite
<tt class="docutils literal"><span class="pre">SELECT</span> <span class="pre">InitSpatialMetaData</span></tt> initialization commands are now automatically
run by <a class="reference internal" href="../ref/django-admin.html#django-admin-migrate"><tt class="xref std std-djadmin docutils literal"><span class="pre">migrate</span></tt></a>.</li>
<li>The GDAL interface now supports retrieving properties of
<a class="reference internal" href="../ref/contrib/gis/gdal.html#raster-data-source-objects"><em>raster (image) data file</em></a>.</li>
<li>Compatibility shims for <tt class="docutils literal"><span class="pre">SpatialRefSys</span></tt> and <tt class="docutils literal"><span class="pre">GeometryColumns</span></tt> changed in
Django 1.2 have been removed.</li>
<li>All GDAL-related exceptions are now raised with <tt class="docutils literal"><span class="pre">GDALException</span></tt>. The former
<tt class="docutils literal"><span class="pre">OGRException</span></tt> has been kept for backwards compatibility but should not be
used any longer.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sessions">
<span id="django-contrib-sessions"></span><h4><a class="reference internal" href="../topics/http/sessions.html#module-django.contrib.sessions" title="django.contrib.sessions: Provides session management for Django projects."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.sessions</span></tt></a><a class="headerlink" href="#django-contrib-sessions" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Session cookie is now deleted after
<a class="reference internal" href="../topics/http/sessions.html#django.contrib.sessions.backends.base.SessionBase.flush" title="django.contrib.sessions.backends.base.SessionBase.flush"><tt class="xref py py-meth docutils literal"><span class="pre">flush()</span></tt></a> is called.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sitemaps">
<span id="django-contrib-sitemaps"></span><h4><a class="reference internal" href="../ref/contrib/sitemaps.html#module-django.contrib.sitemaps" title="django.contrib.sitemaps: A framework for generating Google sitemap XML files."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.sitemaps</span></tt></a><a class="headerlink" href="#django-contrib-sitemaps" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The new <a class="reference internal" href="../ref/contrib/sitemaps.html#django.contrib.sitemaps.Sitemap.i18n" title="django.contrib.sitemaps.Sitemap.i18n"><tt class="xref py py-attr docutils literal"><span class="pre">Sitemap.i18n</span></tt></a> attribute
allows you to generate a sitemap based on the <a class="reference internal" href="../ref/settings.html#std:setting-LANGUAGES"><tt class="xref std std-setting docutils literal"><span class="pre">LANGUAGES</span></tt></a> setting.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sites">
<span id="django-contrib-sites"></span><h4><a class="reference internal" href="../ref/contrib/sites.html#module-django.contrib.sites" title="django.contrib.sites: Lets you operate multiple Web sites from the same database and Django project"><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.sites</span></tt></a><a class="headerlink" href="#django-contrib-sites" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/contrib/sites.html#django.contrib.sites.shortcuts.get_current_site" title="django.contrib.sites.shortcuts.get_current_site"><tt class="xref py py-func docutils literal"><span class="pre">get_current_site()</span></tt></a> will now lookup
the current site based on <a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest.get_host" title="django.http.HttpRequest.get_host"><tt class="xref py py-meth docutils literal"><span class="pre">request.get_host()</span></tt></a> if the <a class="reference internal" href="../ref/settings.html#std:setting-SITE_ID"><tt class="xref std std-setting docutils literal"><span class="pre">SITE_ID</span></tt></a> setting is not
defined.</li>
<li>The default <a class="reference internal" href="../ref/contrib/sites.html#django.contrib.sites.models.Site" title="django.contrib.sites.models.Site"><tt class="xref py py-class docutils literal"><span class="pre">Site</span></tt></a> created when running
<tt class="docutils literal"><span class="pre">migrate</span></tt> now respects the <a class="reference internal" href="../ref/settings.html#std:setting-SITE_ID"><tt class="xref std std-setting docutils literal"><span class="pre">SITE_ID</span></tt></a> setting (instead of always
using <tt class="docutils literal"><span class="pre">pk=1</span></tt>).</li>
</ul>
</div>
<div class="section" id="s-cache">
<span id="cache"></span><h4>Cache<a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">incr()</span></tt> method of the
<tt class="docutils literal"><span class="pre">django.core.cache.backends.locmem.LocMemCache</span></tt> backend is now thread-safe.</li>
</ul>
</div>
<div class="section" id="s-cryptography">
<span id="cryptography"></span><h4>Cryptography<a class="headerlink" href="#cryptography" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">max_age</span></tt> parameter of the
<a class="reference internal" href="../topics/signing.html#django.core.signing.TimestampSigner.unsign" title="django.core.signing.TimestampSigner.unsign"><tt class="xref py py-meth docutils literal"><span class="pre">django.core.signing.TimestampSigner.unsign()</span></tt></a> method now also accepts a
<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.timedelta</span></tt></a> object.</li>
</ul>
</div>
<div class="section" id="s-database-backends">
<span id="database-backends"></span><h4>Database backends<a class="headerlink" href="#database-backends" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The MySQL backend no longer strips microseconds from <tt class="docutils literal"><span class="pre">datetime</span></tt> values as
MySQL 5.6.4 and up supports fractional seconds depending on the declaration
of the datetime field (when <tt class="docutils literal"><span class="pre">DATETIME</span></tt> includes fractional precision greater
than 0). New datetime database columns created with Django 1.8 and MySQL 5.6.4
and up will support microseconds. See the <a class="reference internal" href="../ref/databases.html#mysql-fractional-seconds"><em>MySQL database notes</em></a> for more details.</li>
<li>The MySQL backend no longer creates explicit indexes for foreign keys when
using the InnoDB storage engine, as MySQL already creates them automatically.</li>
<li>The Oracle backend no longer defines the <tt class="docutils literal"><span class="pre">connection_persists_old_columns</span></tt>
feature as <tt class="docutils literal"><span class="pre">True</span></tt>. Instead, Oracle will now include a cache busting clause
when getting the description of a table.</li>
</ul>
</div>
<div class="section" id="s-email">
<span id="email"></span><h4>Email<a class="headerlink" href="#email" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../topics/email.html#topic-email-backends"><em>Email backends</em></a> now support the context manager
protocol for opening and closing connections.</li>
<li>The SMTP email backend now supports <tt class="docutils literal"><span class="pre">keyfile</span></tt> and <tt class="docutils literal"><span class="pre">certfile</span></tt>
authentication with the <a class="reference internal" href="../ref/settings.html#std:setting-EMAIL_SSL_CERTFILE"><tt class="xref std std-setting docutils literal"><span class="pre">EMAIL_SSL_CERTFILE</span></tt></a> and
<a class="reference internal" href="../ref/settings.html#std:setting-EMAIL_SSL_KEYFILE"><tt class="xref std std-setting docutils literal"><span class="pre">EMAIL_SSL_KEYFILE</span></tt></a> settings.</li>
<li>The SMTP <a class="reference internal" href="../topics/email.html#django.core.mail.backends.smtp.EmailBackend" title="django.core.mail.backends.smtp.EmailBackend"><tt class="xref py py-class docutils literal"><span class="pre">EmailBackend</span></tt></a> now supports
setting the <tt class="docutils literal"><span class="pre">timeout</span></tt> parameter with the <a class="reference internal" href="../ref/settings.html#std:setting-EMAIL_TIMEOUT"><tt class="xref std std-setting docutils literal"><span class="pre">EMAIL_TIMEOUT</span></tt></a> setting.</li>
<li><a class="reference internal" href="../topics/email.html#django.core.mail.EmailMessage" title="django.core.mail.EmailMessage"><tt class="xref py py-class docutils literal"><span class="pre">EmailMessage</span></tt></a> and <tt class="docutils literal"><span class="pre">EmailMultiAlternatives</span></tt> now
support the <tt class="docutils literal"><span class="pre">reply_to</span></tt> parameter.</li>
</ul>
</div>
<div class="section" id="s-file-storage">
<span id="file-storage"></span><h4>File Storage<a class="headerlink" href="#file-storage" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/files/storage.html#django.core.files.storage.Storage.get_available_name" title="django.core.files.storage.Storage.get_available_name"><tt class="xref py py-meth docutils literal"><span class="pre">Storage.get_available_name()</span></tt></a> and
<a class="reference internal" href="../ref/files/storage.html#django.core.files.storage.Storage.save" title="django.core.files.storage.Storage.save"><tt class="xref py py-meth docutils literal"><span class="pre">Storage.save()</span></tt></a>
now take a <tt class="docutils literal"><span class="pre">max_length</span></tt> argument to implement storage-level maximum
filename length constraints. Filenames exceeding this argument will get
truncated. This prevents a database error when appending a unique suffix to a
long filename that already exists on the storage. See the <a class="reference internal" href="#storage-max-length-update"><em>deprecation
note</em></a> about adding this argument to your custom
storage classes.</li>
</ul>
</div>
<div class="section" id="s-forms">
<span id="forms"></span><h4>Forms<a class="headerlink" href="#forms" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Form widgets now render attributes with a value of <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt>
as HTML5 boolean attributes.</li>
<li>The new <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.has_error" title="django.forms.Form.has_error"><tt class="xref py py-meth docutils literal"><span class="pre">has_error()</span></tt></a> method allows checking
if a specific error has happened.</li>
<li>If <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.required_css_class" title="django.forms.Form.required_css_class"><tt class="xref py py-attr docutils literal"><span class="pre">required_css_class</span></tt></a> is defined on a form, then
the <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> tags for required fields will have this class present in its
attributes.</li>
<li>The rendering of non-field errors in unordered lists (<tt class="docutils literal"><span class="pre">&lt;ul&gt;</span></tt>) now includes
<tt class="docutils literal"><span class="pre">nonfield</span></tt> in its list of classes to distinguish them from field-specific
errors.</li>
<li><a class="reference internal" href="../ref/forms/fields.html#django.forms.Field" title="django.forms.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> now accepts a
<a class="reference internal" href="../ref/forms/fields.html#django.forms.Field.label_suffix" title="django.forms.Field.label_suffix"><tt class="xref py py-attr docutils literal"><span class="pre">label_suffix</span></tt></a> argument, which will override the
form&#8217;s <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.label_suffix" title="django.forms.Form.label_suffix"><tt class="xref py py-attr docutils literal"><span class="pre">label_suffix</span></tt></a>. This enables customizing the
suffix on a per-field basis — previously it wasn&#8217;t possible to override
a form&#8217;s <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.label_suffix" title="django.forms.Form.label_suffix"><tt class="xref py py-attr docutils literal"><span class="pre">label_suffix</span></tt></a> while using  shortcuts such
as <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">form.as_p</span> <span class="pre">}}</span></tt> in templates.</li>
<li><a class="reference internal" href="../ref/forms/widgets.html#django.forms.extras.widgets.SelectDateWidget" title="django.forms.extras.widgets.SelectDateWidget"><tt class="xref py py-class docutils literal"><span class="pre">SelectDateWidget</span></tt></a> now accepts an
<a class="reference internal" href="../ref/forms/widgets.html#django.forms.extras.widgets.SelectDateWidget.empty_label" title="django.forms.extras.widgets.SelectDateWidget.empty_label"><tt class="xref py py-attr docutils literal"><span class="pre">empty_label</span></tt></a> argument, which will
override the top list choice label when <a class="reference internal" href="../ref/forms/fields.html#django.forms.DateField" title="django.forms.DateField"><tt class="xref py py-class docutils literal"><span class="pre">DateField</span></tt></a> is not required.</li>
<li>After an <a class="reference internal" href="../ref/forms/fields.html#django.forms.ImageField" title="django.forms.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> has been cleaned and validated, the
<tt class="docutils literal"><span class="pre">UploadedFile</span></tt> object will have an additional <tt class="docutils literal"><span class="pre">image</span></tt> attribute containing
the Pillow <tt class="docutils literal"><span class="pre">Image</span></tt> instance used to check if the file was a valid image. It
will also update <tt class="docutils literal"><span class="pre">UploadedFile.content_type</span></tt> with the image&#8217;s content type
as determined by Pillow.</li>
<li>You can now pass a callable that returns an iterable of choices when
instantiating a <a class="reference internal" href="../ref/forms/fields.html#django.forms.ChoiceField" title="django.forms.ChoiceField"><tt class="xref py py-class docutils literal"><span class="pre">ChoiceField</span></tt></a>.</li>
</ul>
</div>
<div class="section" id="s-generic-views">
<span id="generic-views"></span><h4>Generic Views<a class="headerlink" href="#generic-views" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Generic views that use <a class="reference internal" href="../ref/class-based-views/mixins-multiple-object.html#django.views.generic.list.MultipleObjectMixin" title="django.views.generic.list.MultipleObjectMixin"><tt class="xref py py-class docutils literal"><span class="pre">MultipleObjectMixin</span></tt></a>
may now specify the ordering applied to the
<a class="reference internal" href="../ref/class-based-views/mixins-multiple-object.html#django.views.generic.list.MultipleObjectMixin.queryset" title="django.views.generic.list.MultipleObjectMixin.queryset"><tt class="xref py py-attr docutils literal"><span class="pre">queryset</span></tt></a> by setting
<a class="reference internal" href="../ref/class-based-views/mixins-multiple-object.html#django.views.generic.list.MultipleObjectMixin.ordering" title="django.views.generic.list.MultipleObjectMixin.ordering"><tt class="xref py py-attr docutils literal"><span class="pre">ordering</span></tt></a> or overriding
<a class="reference internal" href="../ref/class-based-views/mixins-multiple-object.html#django.views.generic.list.MultipleObjectMixin.get_ordering" title="django.views.generic.list.MultipleObjectMixin.get_ordering"><tt class="xref py py-meth docutils literal"><span class="pre">get_ordering()</span></tt></a>.</li>
<li>The new <a class="reference internal" href="../ref/class-based-views/mixins-single-object.html#django.views.generic.detail.SingleObjectMixin.query_pk_and_slug" title="django.views.generic.detail.SingleObjectMixin.query_pk_and_slug"><tt class="xref py py-attr docutils literal"><span class="pre">SingleObjectMixin.query_pk_and_slug</span></tt></a>
attribute allows changing the behavior of
<a class="reference internal" href="../ref/class-based-views/mixins-single-object.html#django.views.generic.detail.SingleObjectMixin.get_object" title="django.views.generic.detail.SingleObjectMixin.get_object"><tt class="xref py py-meth docutils literal"><span class="pre">get_object()</span></tt></a>
so that it&#8217;ll perform its lookup using both the primary key and the slug.</li>
<li>The <a class="reference internal" href="../ref/class-based-views/mixins-editing.html#django.views.generic.edit.FormMixin.get_form" title="django.views.generic.edit.FormMixin.get_form"><tt class="xref py py-meth docutils literal"><span class="pre">get_form()</span></tt></a> method doesn&#8217;t
require a <tt class="docutils literal"><span class="pre">form_class</span></tt> to be provided anymore. If not provided <tt class="docutils literal"><span class="pre">form_class</span></tt>
defaults to <a class="reference internal" href="../ref/class-based-views/mixins-editing.html#django.views.generic.edit.FormMixin.get_form_class" title="django.views.generic.edit.FormMixin.get_form_class"><tt class="xref py py-meth docutils literal"><span class="pre">get_form_class()</span></tt></a>.</li>
<li>Placeholders in <a class="reference internal" href="../ref/class-based-views/mixins-editing.html#django.views.generic.edit.ModelFormMixin.success_url" title="django.views.generic.edit.ModelFormMixin.success_url"><tt class="xref py py-attr docutils literal"><span class="pre">ModelFormMixin.success_url</span></tt></a> now support the Python
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str.format" title="(in Python v3.4)"><tt class="xref py py-meth docutils literal"><span class="pre">str.format()</span></tt></a> syntax. The legacy <tt class="docutils literal"><span class="pre">%(&lt;foo&gt;)s</span></tt> syntax is still
supported but will be removed in Django 2.0.</li>
</ul>
</div>
<div class="section" id="s-internationalization">
<span id="internationalization"></span><h4>Internationalization<a class="headerlink" href="#internationalization" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/settings.html#std:setting-FORMAT_MODULE_PATH"><tt class="xref std std-setting docutils literal"><span class="pre">FORMAT_MODULE_PATH</span></tt></a> can now be a list of strings representing
module paths. This allows importing several format modules from different
reusable apps. It also allows overriding those custom formats in your main
Django project.</li>
</ul>
</div>
<div class="section" id="s-logging">
<span id="logging"></span><h4>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <a class="reference internal" href="../topics/logging.html#django.utils.log.AdminEmailHandler" title="django.utils.log.AdminEmailHandler"><tt class="xref py py-class docutils literal"><span class="pre">django.utils.log.AdminEmailHandler</span></tt></a> class now has a
<a class="reference internal" href="../topics/logging.html#django.utils.log.AdminEmailHandler.send_mail" title="django.utils.log.AdminEmailHandler.send_mail"><tt class="xref py py-meth docutils literal"><span class="pre">send_mail()</span></tt></a> method to make it more
subclass friendly.</li>
</ul>
</div>
<div class="section" id="s-management-commands">
<span id="management-commands"></span><h4>Management Commands<a class="headerlink" href="#management-commands" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Database connections are now always closed after a management command called
from the command line has finished doing its job.</li>
<li>Commands from alternate package formats like eggs are now also discovered.</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-dumpdata"><tt class="xref std std-djadmin docutils literal"><span class="pre">dumpdata</span></tt></a> now has the option <a class="reference internal" href="../ref/django-admin.html#django-admin-option---output"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--output</span></tt></a> which allows
specifying the file to which the serialized data is written.</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-makemessages"><tt class="xref std std-djadmin docutils literal"><span class="pre">makemessages</span></tt></a> and <a class="reference internal" href="../ref/django-admin.html#django-admin-compilemessages"><tt class="xref std std-djadmin docutils literal"><span class="pre">compilemessages</span></tt></a> now have the option
<a class="reference internal" href="../ref/django-admin.html#django-admin-option---exclude"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--exclude</span></tt></a> which allows exclusion of specific locales from
processing.</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-compilemessages"><tt class="xref std std-djadmin docutils literal"><span class="pre">compilemessages</span></tt></a> now has a <tt class="docutils literal"><span class="pre">--use-fuzzy</span></tt> or <tt class="docutils literal"><span class="pre">-f</span></tt> option which
includes fuzzy translations into compiled files.</li>
<li>The <a class="reference internal" href="../ref/django-admin.html#django-admin-option---ignorenonexistent"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--ignorenonexistent</span></tt></a> option of the <a class="reference internal" href="../ref/django-admin.html#django-admin-loaddata"><tt class="xref std std-djadmin docutils literal"><span class="pre">loaddata</span></tt></a>
management command now ignores data for models that no longer exist.</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-runserver"><tt class="xref std std-djadmin docutils literal"><span class="pre">runserver</span></tt></a> now uses daemon threads for faster reloading.</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-inspectdb"><tt class="xref std std-djadmin docutils literal"><span class="pre">inspectdb</span></tt></a> now outputs <tt class="docutils literal"><span class="pre">Meta.unique_together</span></tt>. It is also able to
introspect <a class="reference internal" href="../ref/models/fields.html#django.db.models.AutoField" title="django.db.models.AutoField"><tt class="xref py py-class docutils literal"><span class="pre">AutoField</span></tt></a> for MySQL and PostgreSQL
databases.</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-inspectdb"><tt class="xref std std-djadmin docutils literal"><span class="pre">inspectdb</span></tt></a> now introspects database views on all database backends.
In previous versions, only tables (not views) were inspected.</li>
<li>When calling management commands from code through <a class="reference internal" href="../ref/django-admin.html#call-command"><em>call_command</em></a> and passing options, the option name can match the command
line option name (without the initial dashes) or the final option destination
variable name, but in either case, the resulting option received by the
command is now always the <tt class="docutils literal"><span class="pre">dest</span></tt> name specified in the command option
definition (as long as the command uses the new <a class="reference external" href="https://docs.python.org/3/library/argparse.html#module-argparse" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">argparse</span></tt></a> module).</li>
<li>The <a class="reference internal" href="../ref/django-admin.html#django-admin-dbshell"><tt class="xref std std-djadmin docutils literal"><span class="pre">dbshell</span></tt></a> command now supports MySQL&#8217;s optional SSL certificate
authority setting (<tt class="docutils literal"><span class="pre">--ssl-ca</span></tt>).</li>
<li>The <a class="reference internal" href="../ref/django-admin.html#django-admin-option---name"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--name</span></tt></a> option for <a class="reference internal" href="../ref/django-admin.html#django-admin-makemigrations"><tt class="xref std std-djadmin docutils literal"><span class="pre">makemigrations</span></tt></a> allows you to
to give the migration(s) a custom name instead of a generated one.</li>
<li>The <a class="reference internal" href="../ref/django-admin.html#django-admin-loaddata"><tt class="xref std std-djadmin docutils literal"><span class="pre">loaddata</span></tt></a> command now prevents repeated fixture loading. If
<a class="reference internal" href="../ref/settings.html#std:setting-FIXTURE_DIRS"><tt class="xref std std-setting docutils literal"><span class="pre">FIXTURE_DIRS</span></tt></a> contains duplicates or a default fixture directory
path (<tt class="docutils literal"><span class="pre">app_name/fixtures</span></tt>), an exception is raised.</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-makemigrations"><tt class="xref std std-djadmin docutils literal"><span class="pre">makemigrations</span></tt></a> now supports an <a class="reference internal" href="../ref/django-admin.html#django-admin-option---exit"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--exit</span></tt></a> option to
exit with an error code if no migrations are created.</li>
<li>The new <a class="reference internal" href="../ref/django-admin.html#django-admin-showmigrations"><tt class="xref std std-djadmin docutils literal"><span class="pre">showmigrations</span></tt></a> command allows listing all migrations and
their dependencies in a project.</li>
</ul>
</div>
<div class="section" id="s-middleware">
<span id="middleware"></span><h4>Middleware<a class="headerlink" href="#middleware" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <a class="reference internal" href="../ref/middleware.html#django.middleware.common.CommonMiddleware.response_redirect_class" title="django.middleware.common.CommonMiddleware.response_redirect_class"><tt class="xref py py-attr docutils literal"><span class="pre">CommonMiddleware.response_redirect_class</span></tt></a>
attribute allows you to customize the redirects issued by the middleware.</li>
<li>A debug message will be logged to the <tt class="docutils literal"><span class="pre">django.request</span></tt> logger when a
middleware raises a <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.MiddlewareNotUsed" title="django.core.exceptions.MiddlewareNotUsed"><tt class="xref py py-exc docutils literal"><span class="pre">MiddlewareNotUsed</span></tt></a> exception
in <a class="reference internal" href="../ref/settings.html#std:setting-DEBUG"><tt class="xref std std-setting docutils literal"><span class="pre">DEBUG</span></tt></a> mode.</li>
</ul>
</div>
<div class="section" id="s-migrations">
<span id="migrations"></span><h4>Migrations<a class="headerlink" href="#migrations" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RunSQL" title="django.db.migrations.operations.RunSQL"><tt class="xref py py-class docutils literal"><span class="pre">RunSQL</span></tt></a> operation can now handle
parameters passed to the SQL statements.</li>
<li>It is now possible to have migrations (most probably <a class="reference internal" href="../topics/migrations.html#data-migrations"><em>data migrations</em></a>) for applications without models.</li>
<li>Migrations can now <a class="reference internal" href="../topics/migrations.html#using-managers-in-migrations"><em>serialize model managers</em></a> as part of the model state.</li>
<li>A <a class="reference internal" href="../topics/migrations.html#migrations-removing-model-fields"><em>generic mechanism to handle the deprecation of model fields</em></a> was added.</li>
<li>The <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RunPython.noop" title="django.db.migrations.operations.RunPython.noop"><tt class="xref py py-meth docutils literal"><span class="pre">RunPython.noop()</span></tt></a>
and <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RunSQL.noop" title="django.db.migrations.operations.RunSQL.noop"><tt class="xref py py-attr docutils literal"><span class="pre">RunSQL.noop</span></tt></a> class
method/attribute were added to ease in making <tt class="docutils literal"><span class="pre">RunPython</span></tt> and <tt class="docutils literal"><span class="pre">RunSQL</span></tt>
operations reversible.</li>
<li>The migration operations <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RunPython" title="django.db.migrations.operations.RunPython"><tt class="xref py py-class docutils literal"><span class="pre">RunPython</span></tt></a>
and <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RunSQL" title="django.db.migrations.operations.RunSQL"><tt class="xref py py-class docutils literal"><span class="pre">RunSQL</span></tt></a> now call the
<a class="reference internal" href="../topics/db/multi-db.html#allow_migrate" title="allow_migrate"><tt class="xref py py-meth docutils literal"><span class="pre">allow_migrate()</span></tt></a> method of database routers. The router can use the
newly introduced <tt class="docutils literal"><span class="pre">app_label</span></tt> and <tt class="docutils literal"><span class="pre">hints</span></tt> arguments to make a routing
decision. To take advantage of this feature you need to update the router to
the new <tt class="docutils literal"><span class="pre">allow_migrate</span></tt> signature, see the <a class="reference internal" href="#deprecated-signature-of-allow-migrate"><em>deprecation section</em></a> for more details.</li>
</ul>
</div>
<div class="section" id="s-models">
<span id="models"></span><h4>Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Django now logs at most 9000 queries in <tt class="docutils literal"><span class="pre">connections.queries</span></tt>, in order
to prevent excessive memory usage in long-running processes in debug mode.</li>
<li>There is now a model <tt class="docutils literal"><span class="pre">Meta</span></tt> option to define a
<a class="reference internal" href="../ref/models/options.html#django.db.models.Options.default_related_name" title="django.db.models.Options.default_related_name"><tt class="xref py py-attr docutils literal"><span class="pre">default</span> <span class="pre">related</span> <span class="pre">name</span></tt></a>
for all relational fields of a model.</li>
<li>Pickling models and querysets across different versions of Django isn&#8217;t
officially supported (it may work, but there&#8217;s no guarantee). An extra
variable that specifies the current Django version is now added to the
pickled state of models and querysets, and Django raises a <tt class="docutils literal"><span class="pre">RuntimeWarning</span></tt>
when these objects are unpickled in a different version than the one in
which they were pickled.</li>
<li>Added <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.from_db" title="django.db.models.Model.from_db"><tt class="xref py py-meth docutils literal"><span class="pre">Model.from_db()</span></tt></a> which
Django uses whenever objects are loaded using the ORM. The method allows
customizing model loading behavior.</li>
<li><tt class="docutils literal"><span class="pre">extra(select={...})</span></tt> now allows you to escape a literal <tt class="docutils literal"><span class="pre">%s</span></tt> sequence
using <tt class="docutils literal"><span class="pre">%%s</span></tt>.</li>
<li><a class="reference internal" href="../howto/custom-lookups.html"><em>Custom Lookups</em></a> can now be registered using
a decorator pattern.</li>
<li>The new <a class="reference internal" href="../ref/models/lookups.html#django.db.models.Transform.bilateral" title="django.db.models.Transform.bilateral"><tt class="xref py py-attr docutils literal"><span class="pre">Transform.bilateral</span></tt></a>
attribute allows creating bilateral transformations. These transformations
are applied to both <tt class="docutils literal"><span class="pre">lhs</span></tt> and <tt class="docutils literal"><span class="pre">rhs</span></tt> when used in a lookup expression,
providing opportunities for more sophisticated lookups.</li>
<li>SQL special characters (, %, _) are now escaped properly when a pattern
lookup (e.g. <tt class="docutils literal"><span class="pre">contains</span></tt>, <tt class="docutils literal"><span class="pre">startswith</span></tt>, etc.) is used with an <tt class="docutils literal"><span class="pre">F()</span></tt>
expression as the right-hand side. In those cases, the escaping is performed
by the database, which can lead to somewhat complex queries involving nested
<tt class="docutils literal"><span class="pre">REPLACE</span></tt> function calls.</li>
<li>You can now refresh model instances by using <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.refresh_from_db" title="django.db.models.Model.refresh_from_db"><tt class="xref py py-meth docutils literal"><span class="pre">Model.refresh_from_db()</span></tt></a>.</li>
<li>You can now get the set of deferred fields for a model using
<a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.get_deferred_fields" title="django.db.models.Model.get_deferred_fields"><tt class="xref py py-meth docutils literal"><span class="pre">Model.get_deferred_fields()</span></tt></a>.</li>
<li>Model field <tt class="docutils literal"><span class="pre">default</span></tt>’s are now used when primary key field&#8217;s are set to
<tt class="docutils literal"><span class="pre">None</span></tt>.</li>
</ul>
</div>
<div class="section" id="s-signals">
<span id="signals"></span><h4>Signals<a class="headerlink" href="#signals" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Exceptions from the <tt class="docutils literal"><span class="pre">(receiver,</span> <span class="pre">exception)</span></tt> tuples returned by
<a class="reference internal" href="../topics/signals.html#django.dispatch.Signal.send_robust" title="django.dispatch.Signal.send_robust"><tt class="xref py py-meth docutils literal"><span class="pre">Signal.send_robust()</span></tt></a> now have
their traceback attached as a <tt class="docutils literal"><span class="pre">__traceback__</span></tt> attribute.</li>
<li>The <tt class="docutils literal"><span class="pre">environ</span></tt> argument, which contains the WSGI environment structure from
the request, was added to the <a class="reference internal" href="../ref/signals.html#django.core.signals.request_started" title="django.core.signals.request_started"><tt class="xref py py-data docutils literal"><span class="pre">request_started</span></tt></a>
signal.</li>
<li>You can now import the <a class="reference internal" href="../ref/signals.html#django.test.signals.setting_changed" title="django.test.signals.setting_changed"><tt class="xref py py-func docutils literal"><span class="pre">setting_changed()</span></tt></a> signal
from <tt class="docutils literal"><span class="pre">django.core.signals</span></tt> to avoid loading <tt class="docutils literal"><span class="pre">django.test</span></tt> in non-test
situations. Django no longer does so itself.</li>
</ul>
</div>
<div class="section" id="s-system-check-framework">
<span id="system-check-framework"></span><h4>System Check Framework<a class="headerlink" href="#system-check-framework" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../topics/checks.html#django.core.checks.register" title="django.core.checks.register"><tt class="xref py py-attr docutils literal"><span class="pre">register</span></tt></a> can now be used as a function.</li>
</ul>
</div>
<div class="section" id="s-templates">
<span id="templates"></span><h4>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/templates/builtins.html#std:templatefilter-urlize"><tt class="xref std std-tfilter docutils literal"><span class="pre">urlize</span></tt></a> now supports domain-only links that include characters after
the top-level domain (e.g. <tt class="docutils literal"><span class="pre">djangoproject.com/</span></tt> and
<tt class="docutils literal"><span class="pre">djangoproject.com/download/</span></tt>).</li>
<li><a class="reference internal" href="../ref/templates/builtins.html#std:templatefilter-urlize"><tt class="xref std std-tfilter docutils literal"><span class="pre">urlize</span></tt></a> doesn&#8217;t treat exclamation marks at the end of a domain or
its query string as part of the URL (the URL in e.g. <tt class="docutils literal"><span class="pre">'djangoproject.com!</span></tt>
is <tt class="docutils literal"><span class="pre">djangoproject.com</span></tt>)</li>
<li>Added a <a class="reference internal" href="../ref/templates/api.html#django.template.loaders.locmem.Loader" title="django.template.loaders.locmem.Loader"><tt class="xref py py-class docutils literal"><span class="pre">locmem.Loader</span></tt></a>
class that loads Django templates from a Python dictionary.</li>
<li>The <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-now"><tt class="xref std std-ttag docutils literal"><span class="pre">now</span></tt></a> tag can now store its output in a context variable with the
usual syntax: <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">now</span> <span class="pre">'j</span> <span class="pre">n</span> <span class="pre">Y'</span> <span class="pre">as</span> <span class="pre">varname</span> <span class="pre">%}</span></tt>.</li>
</ul>
</div>
<div class="section" id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>Requests and Responses<a class="headerlink" href="#requests-and-responses" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">WSGIRequest</span></tt> now respects paths starting with <tt class="docutils literal"><span class="pre">//</span></tt>.</li>
<li>The <a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest.build_absolute_uri" title="django.http.HttpRequest.build_absolute_uri"><tt class="xref py py-meth docutils literal"><span class="pre">HttpRequest.build_absolute_uri()</span></tt></a> method now handles paths
starting with <tt class="docutils literal"><span class="pre">//</span></tt> correctly.</li>
<li>If <a class="reference internal" href="../ref/settings.html#std:setting-DEBUG"><tt class="xref std std-setting docutils literal"><span class="pre">DEBUG</span></tt></a> is <tt class="docutils literal"><span class="pre">True</span></tt> and a request raises a
<a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.SuspiciousOperation" title="django.core.exceptions.SuspiciousOperation"><tt class="xref py py-exc docutils literal"><span class="pre">SuspiciousOperation</span></tt></a>, the response will be
rendered with a detailed error page.</li>
<li>The <tt class="docutils literal"><span class="pre">query_string</span></tt> argument of <a class="reference internal" href="../ref/request-response.html#django.http.QueryDict" title="django.http.QueryDict"><tt class="xref py py-class docutils literal"><span class="pre">QueryDict</span></tt></a> is now
optional, defaulting to <tt class="docutils literal"><span class="pre">None</span></tt>, so a blank <tt class="docutils literal"><span class="pre">QueryDict</span></tt> can now be
instantiated with <tt class="docutils literal"><span class="pre">QueryDict()</span></tt> instead of <tt class="docutils literal"><span class="pre">QueryDict(None)</span></tt> or
<tt class="docutils literal"><span class="pre">QueryDict('')</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">GET</span></tt> and <tt class="docutils literal"><span class="pre">POST</span></tt> attributes of an <a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><tt class="xref py py-class docutils literal"><span class="pre">HttpRequest</span></tt></a>
object are now <a class="reference internal" href="../ref/request-response.html#django.http.QueryDict" title="django.http.QueryDict"><tt class="xref py py-class docutils literal"><span class="pre">QueryDict</span></tt></a>s rather than dictionaries,
and the <tt class="docutils literal"><span class="pre">FILES</span></tt> attribute is now a <tt class="docutils literal"><span class="pre">MultiValueDict</span></tt>.
This brings this class into line with the documentation and with
<tt class="docutils literal"><span class="pre">WSGIRequest</span></tt>.</li>
<li>The <a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse.charset" title="django.http.HttpResponse.charset"><tt class="xref py py-attr docutils literal"><span class="pre">HttpResponse.charset</span></tt></a> attribute
was added.</li>
<li><tt class="docutils literal"><span class="pre">WSGIRequestHandler</span></tt> now follows RFC in converting URI to IRI, using
<tt class="docutils literal"><span class="pre">uri_to_iri()</span></tt>.</li>
<li>The <a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest.get_full_path" title="django.http.HttpRequest.get_full_path"><tt class="xref py py-meth docutils literal"><span class="pre">HttpRequest.get_full_path()</span></tt></a> method now escapes unsafe characters
from the path portion of a Uniform Resource Identifier (URI) properly.</li>
<li><a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> now implements a few additional methods
like <a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse.getvalue" title="django.http.HttpResponse.getvalue"><tt class="xref py py-meth docutils literal"><span class="pre">getvalue()</span></tt></a> so that instances can be used
as stream objects.</li>
<li>The new <a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse.setdefault" title="django.http.HttpResponse.setdefault"><tt class="xref py py-meth docutils literal"><span class="pre">HttpResponse.setdefault()</span></tt></a> method allows setting a header unless
it has already been set.</li>
<li>You can use the new <a class="reference internal" href="../ref/request-response.html#django.http.FileResponse" title="django.http.FileResponse"><tt class="xref py py-class docutils literal"><span class="pre">FileResponse</span></tt></a> to stream files.</li>
<li>The <a class="reference internal" href="../topics/http/decorators.html#django.views.decorators.http.condition" title="django.views.decorators.http.condition"><tt class="xref py py-func docutils literal"><span class="pre">condition()</span></tt></a> decorator for
conditional view processing now supports the <tt class="docutils literal"><span class="pre">If-unmodified-since</span></tt> header.</li>
</ul>
</div>
<div class="section" id="s-tests">
<span id="tests"></span><h4>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <a class="reference internal" href="../topics/testing/advanced.html#django.test.RequestFactory" title="django.test.RequestFactory"><tt class="xref py py-class docutils literal"><span class="pre">RequestFactory.trace()</span></tt></a>
and <a class="reference internal" href="../topics/testing/tools.html#django.test.Client.trace" title="django.test.Client.trace"><tt class="xref py py-class docutils literal"><span class="pre">Client.trace()</span></tt></a> methods were
implemented, allowing you to create <tt class="docutils literal"><span class="pre">TRACE</span></tt> requests in your tests.</li>
<li>The <tt class="docutils literal"><span class="pre">count</span></tt> argument was added to
<a class="reference internal" href="../topics/testing/tools.html#django.test.SimpleTestCase.assertTemplateUsed" title="django.test.SimpleTestCase.assertTemplateUsed"><tt class="xref py py-meth docutils literal"><span class="pre">assertTemplateUsed()</span></tt></a>. This allows you to
assert that a template was rendered a specific number of times.</li>
<li>The new <a class="reference internal" href="../topics/testing/tools.html#django.test.SimpleTestCase.assertJSONNotEqual" title="django.test.SimpleTestCase.assertJSONNotEqual"><tt class="xref py py-meth docutils literal"><span class="pre">assertJSONNotEqual()</span></tt></a> assertion
allows you to test that two JSON fragments are not equal.</li>
<li>Added options to the <a class="reference internal" href="../ref/django-admin.html#django-admin-test"><tt class="xref std std-djadmin docutils literal"><span class="pre">test</span></tt></a> command to preserve the test database
(<a class="reference internal" href="../ref/django-admin.html#django-admin-option---keepdb"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--keepdb</span></tt></a>), to run the test cases in reverse order
(<a class="reference internal" href="../ref/django-admin.html#django-admin-option---reverse"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--reverse</span></tt></a>), and to enable SQL logging for failing tests
(<a class="reference internal" href="../ref/django-admin.html#django-admin-option---debug-sql"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--debug-sql</span></tt></a>).</li>
<li>Added the <a class="reference internal" href="../topics/testing/tools.html#django.test.Response.resolver_match" title="django.test.Response.resolver_match"><tt class="xref py py-attr docutils literal"><span class="pre">resolver_match</span></tt></a> attribute to test
client responses.</li>
<li>Added several settings that allow customization of test tablespace parameters
for Oracle: <a class="reference internal" href="../ref/settings.html#std:setting-DATAFILE"><tt class="xref std std-setting docutils literal"><span class="pre">DATAFILE</span></tt></a>, <a class="reference internal" href="../ref/settings.html#std:setting-DATAFILE_TMP"><tt class="xref std std-setting docutils literal"><span class="pre">DATAFILE_TMP</span></tt></a>,
<a class="reference internal" href="../ref/settings.html#std:setting-DATAFILE_MAXSIZE"><tt class="xref std std-setting docutils literal"><span class="pre">DATAFILE_MAXSIZE</span></tt></a> and <a class="reference internal" href="../ref/settings.html#std:setting-DATAFILE_TMP_MAXSIZE"><tt class="xref std std-setting docutils literal"><span class="pre">DATAFILE_TMP_MAXSIZE</span></tt></a>.</li>
<li>The <a class="reference internal" href="../topics/testing/tools.html#django.test.override_settings" title="django.test.override_settings"><tt class="xref py py-func docutils literal"><span class="pre">override_settings()</span></tt></a> decorator can now affect the
master router in <a class="reference internal" href="../ref/settings.html#std:setting-DATABASE_ROUTERS"><tt class="xref std std-setting docutils literal"><span class="pre">DATABASE_ROUTERS</span></tt></a>.</li>
<li>Added test client support for file uploads with file-like objects.</li>
<li>A shared cache is now used when testing with a SQLite in-memory database when
using Python 3.4+ and SQLite 3.7.13+. This allows sharing the database
between threads.</li>
</ul>
</div>
<div class="section" id="s-validators">
<span id="validators"></span><h4>Validators<a class="headerlink" href="#validators" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/validators.html#django.core.validators.URLValidator" title="django.core.validators.URLValidator"><tt class="xref py py-class docutils literal"><span class="pre">URLValidator</span></tt></a> now supports IPv6 addresses,
unicode domains, and URLs containing authentication data.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="s-backwards-incompatible-changes-in-1-8">
<span id="backwards-incompatible-changes-in-1-8"></span><h2>Backwards incompatible changes in 1.8<a class="headerlink" href="#backwards-incompatible-changes-in-1-8" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In addition to the changes outlined in this section, be sure to review the
<a class="reference internal" href="../internals/deprecation.html#deprecation-removed-in-1-8"><em>deprecation plan</em></a> for any features that
have been removed. If you haven&#8217;t updated your code within the
deprecation timeline for a given feature, its removal may appear as a
backwards incompatible change.</p>
</div>
<div class="section" id="s-related-object-operations-are-run-in-a-transaction">
<span id="related-object-operations-are-run-in-a-transaction"></span><h3>Related object operations are run in a transaction<a class="headerlink" href="#related-object-operations-are-run-in-a-transaction" title="Permalink to this headline">¶</a></h3>
<p>Some operations on related objects such as
<a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.add" title="django.db.models.fields.related.RelatedManager.add"><tt class="xref py py-meth docutils literal"><span class="pre">add()</span></tt></a> or
<a class="reference internal" href="../ref/models/relations.html#direct-assignment"><em>direct assignment</em></a> ran multiple data modifying
queries without wrapping them in transactions. To reduce the risk of data
corruption, all data modifying methods that affect multiple related objects
(i.e. <tt class="docutils literal"><span class="pre">add()</span></tt>, <tt class="docutils literal"><span class="pre">remove()</span></tt>, <tt class="docutils literal"><span class="pre">clear()</span></tt>, and <a class="reference internal" href="../ref/models/relations.html#direct-assignment"><em>direct assignment</em></a>) now perform their data modifying queries from within a
transaction, provided your database supports transactions.</p>
<p>This has one backwards incompatible side effect, signal handlers triggered from
these methods are now executed within the method&#8217;s transaction and any
exception in a signal handler will prevent the whole operation.</p>
</div>
<div class="section" id="s-assigning-unsaved-objects-to-relations-raises-an-error">
<span id="assigning-unsaved-objects-to-relations-raises-an-error"></span><h3>Assigning unsaved objects to relations raises an error<a class="headerlink" href="#assigning-unsaved-objects-to-relations-raises-an-error" title="Permalink to this headline">¶</a></h3>
<p>Assigning unsaved objects to a <a class="reference internal" href="../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>,
<a class="reference internal" href="../ref/contrib/contenttypes.html#django.contrib.contenttypes.fields.GenericForeignKey" title="django.contrib.contenttypes.fields.GenericForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">GenericForeignKey</span></tt></a>, and
<a class="reference internal" href="../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><tt class="xref py py-class docutils literal"><span class="pre">OneToOneField</span></tt></a> now raises a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt></a>.</p>
<p>Previously, the assignment of an unsaved object would be silently ignored.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Django&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;John&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">author</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Django&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">author</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Now, an error will be raised to prevent data loss:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;john&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Cannot assign &quot;&lt;Author: John&gt;&quot;: &quot;Author&quot; instance isn&#39;t saved in the database.</span>
</pre></div>
</div>
<p>If you require allowing the assignment of unsaved instances (the old behavior)
and aren&#8217;t concerned about the data loss possibility (e.g. you never save the
objects to the database), you can disable this check by using the
<a class="reference internal" href="../ref/models/fields.html#django.db.models.ForeignKey.allow_unsaved_instance_assignment" title="django.db.models.ForeignKey.allow_unsaved_instance_assignment"><tt class="xref py py-attr docutils literal"><span class="pre">allow_unsaved_instance_assignment</span></tt></a>
attribute.</p>
</div>
<div class="section" id="s-management-commands-that-only-accept-positional-arguments">
<span id="management-commands-that-only-accept-positional-arguments"></span><h3>Management commands that only accept positional arguments<a class="headerlink" href="#management-commands-that-only-accept-positional-arguments" title="Permalink to this headline">¶</a></h3>
<p>If you have written a custom management command that only accepts positional
arguments and you didn&#8217;t specify the
<a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.BaseCommand.args" title="django.core.management.BaseCommand.args"><tt class="xref py py-attr docutils literal"><span class="pre">args</span></tt></a> command variable, you might
get an error like <tt class="docutils literal"><span class="pre">Error:</span> <span class="pre">unrecognized</span> <span class="pre">arguments:</span> <span class="pre">...</span></tt>, as variable parsing
is now based on <a class="reference external" href="https://docs.python.org/3/library/argparse.html#module-argparse" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">argparse</span></tt></a> which doesn&#8217;t implicitly accept positional
arguments. You can make your command backwards compatible by simply setting the
<a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.BaseCommand.args" title="django.core.management.BaseCommand.args"><tt class="xref py py-attr docutils literal"><span class="pre">args</span></tt></a> class variable. However, if
you don&#8217;t have to keep compatibility with older Django versions, it&#8217;s better to
implement the new <a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.BaseCommand.add_arguments" title="django.core.management.BaseCommand.add_arguments"><tt class="xref py py-meth docutils literal"><span class="pre">add_arguments()</span></tt></a>
method as described in <a class="reference internal" href="../howto/custom-management-commands.html"><em>Writing custom django-admin commands</em></a>.</p>
</div>
<div class="section" id="s-custom-test-management-command-arguments-through-test-runner">
<span id="custom-test-management-command-arguments-through-test-runner"></span><h3>Custom test management command arguments through test runner<a class="headerlink" href="#custom-test-management-command-arguments-through-test-runner" title="Permalink to this headline">¶</a></h3>
<p>The method to add custom arguments to the <cite>test</cite> management command through the
test runner has changed. Previously, you could provide an <cite>option_list</cite> class
variable on the test runner to add more arguments (à la <a class="reference external" href="https://docs.python.org/3/library/optparse.html#module-optparse" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">optparse</span></tt></a>).
Now to implement the same behavior, you have to create an
<tt class="docutils literal"><span class="pre">add_arguments(cls,</span> <span class="pre">parser)</span></tt> class method on the test runner and call
<tt class="docutils literal"><span class="pre">parser.add_argument</span></tt> to add any custom arguments, as parser is now an
<a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">argparse.ArgumentParser</span></tt></a> instance.</p>
</div>
<div class="section" id="s-model-check-ensures-auto-generated-column-names-are-within-limits-specified-by-database">
<span id="model-check-ensures-auto-generated-column-names-are-within-limits-specified-by-database"></span><h3>Model check ensures auto-generated column names are within limits specified by database<a class="headerlink" href="#model-check-ensures-auto-generated-column-names-are-within-limits-specified-by-database" title="Permalink to this headline">¶</a></h3>
<p>A field name that&#8217;s longer than the column name length supported by a database
can create problems. For example, with MySQL you&#8217;ll get an exception trying to
create the column, and with PostgreSQL the column name is truncated by the
database (you may see a warning in the PostgreSQL logs).</p>
<p>A model check has been introduced to better alert users to this scenario before
the actual creation of database tables.</p>
<p>If you have an existing model where this check seems to be a false positive,
for example on PostgreSQL where the name was already being truncated, simply
use <a class="reference internal" href="../ref/models/fields.html#django.db.models.Field.db_column" title="django.db.models.Field.db_column"><tt class="xref py py-attr docutils literal"><span class="pre">db_column</span></tt></a> to specify the name that&#8217;s being
used.</p>
<p>The check also applies to the columns generated in an implicit
<tt class="docutils literal"><span class="pre">ManyToManyField.through</span></tt> model. If you run into an issue there, use
<a class="reference internal" href="../ref/models/fields.html#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><tt class="xref py py-attr docutils literal"><span class="pre">through</span></tt></a> to create an explicit model
and then specify <a class="reference internal" href="../ref/models/fields.html#django.db.models.Field.db_column" title="django.db.models.Field.db_column"><tt class="xref py py-attr docutils literal"><span class="pre">db_column</span></tt></a> on its column(s)
as needed.</p>
</div>
<div class="section" id="s-query-relation-lookups-now-check-object-types">
<span id="query-relation-lookups-now-check-object-types"></span><h3>Query relation lookups now check object types<a class="headerlink" href="#query-relation-lookups-now-check-object-types" title="Permalink to this headline">¶</a></h3>
<p>Querying for model lookups now checks if the object passed is of correct type
and raises a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt></a> if not. Previously, Django didn&#8217;t care if the
object was of correct type; it just used the object&#8217;s related field attribute
(e.g. <tt class="docutils literal"><span class="pre">id</span></tt>) for the lookup. Now, an error is raised to prevent incorrect
lookups:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Django&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="n">book</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Cannot query &quot;&lt;Book: Django&gt;&quot;: Must be &quot;Author&quot; instance.</span>
</pre></div>
</div>
</div>
<div class="section" id="s-select-related-now-checks-given-fields">
<span id="select-related-now-checks-given-fields"></span><h3><tt class="docutils literal"><span class="pre">select_related()</span></tt> now checks given fields<a class="headerlink" href="#select-related-now-checks-given-fields" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">select_related()</span></tt> now validates that the given fields actually exist.
Previously, nonexistent fields were silently ignored. Now, an error is raised:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="s">&#39;nonexistent_field&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">FieldError</span>: <span class="n">Invalid field name(s) given in select_related: &#39;nonexistent_field&#39;</span>
</pre></div>
</div>
<p>The validation also makes sure that the given field is relational:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">FieldError</span>: <span class="n">Non-relational field given in select_related: &#39;name&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="s-default-emailfield-max-length-increased-to-254">
<span id="default-emailfield-max-length-increased-to-254"></span><h3>Default <tt class="docutils literal"><span class="pre">EmailField.max_length</span></tt> increased to 254<a class="headerlink" href="#default-emailfield-max-length-increased-to-254" title="Permalink to this headline">¶</a></h3>
<p>The old default 75 character <tt class="docutils literal"><span class="pre">max_length</span></tt> was not capable of storing all
possible RFC3696/5321-compliant email addresses. In order to store all
possible valid email addresses, the <tt class="docutils literal"><span class="pre">max_length</span></tt> has been increased to 254
characters. You will need to generate and apply database migrations for your
affected models (or add <tt class="docutils literal"><span class="pre">max_length=75</span></tt> if you wish to keep the length on
your current fields). A migration for
<a class="reference internal" href="../ref/contrib/auth.html#django.contrib.auth.models.User.email" title="django.contrib.auth.models.User.email"><tt class="xref py py-attr docutils literal"><span class="pre">django.contrib.auth.models.User.email</span></tt></a> is included.</p>
</div>
<div class="section" id="s-support-for-postgresql-versions-older-than-9-0">
<span id="support-for-postgresql-versions-older-than-9-0"></span><h3>Support for PostgreSQL versions older than 9.0<a class="headerlink" href="#support-for-postgresql-versions-older-than-9-0" title="Permalink to this headline">¶</a></h3>
<p>The end of upstream support periods was reached in July 2014 for PostgreSQL 8.4.
As a consequence, Django 1.8 sets 9.0 as the minimum PostgreSQL version it
officially supports.</p>
<p>This also includes dropping support for PostGIS 1.3 and 1.4 as these versions
are not supported on versions of PostgreSQL later than 8.4.</p>
<p>Django also now requires the use of Psycopg2 version 2.4.5 or higher (or 2.5+
if you want to use <a class="reference internal" href="../ref/contrib/postgres/index.html#module-django.contrib.postgres" title="django.contrib.postgres: PostgreSQL-specific fields and features"><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.postgres</span></tt></a>).</p>
</div>
<div class="section" id="s-support-for-mysql-versions-older-than-5-5">
<span id="support-for-mysql-versions-older-than-5-5"></span><h3>Support for MySQL versions older than 5.5<a class="headerlink" href="#support-for-mysql-versions-older-than-5-5" title="Permalink to this headline">¶</a></h3>
<p>The end of upstream support periods was reached in January 2012 for MySQL 5.0
and December 2013 for MySQL 5.1. As a consequence, Django 1.8 sets 5.5 as the
minimum MySQL version it officially supports.</p>
</div>
<div class="section" id="s-support-for-oracle-versions-older-than-11-1">
<span id="support-for-oracle-versions-older-than-11-1"></span><h3>Support for Oracle versions older than 11.1<a class="headerlink" href="#support-for-oracle-versions-older-than-11-1" title="Permalink to this headline">¶</a></h3>
<p>The end of upstream support periods was reached in July 2010 for Oracle 9.2,
January 2012 for Oracle 10.1, and July 2013 for Oracle 10.2. As a consequence,
Django 1.8 sets 11.1 as the minimum Oracle version it officially supports.</p>
</div>
<div class="section" id="s-specific-privileges-used-instead-of-roles-for-tests-on-oracle">
<span id="specific-privileges-used-instead-of-roles-for-tests-on-oracle"></span><h3>Specific privileges used instead of roles for tests on Oracle<a class="headerlink" href="#specific-privileges-used-instead-of-roles-for-tests-on-oracle" title="Permalink to this headline">¶</a></h3>
<p>Earlier versions of Django granted the CONNECT and RESOURCE roles to the test
user on Oracle. These roles have been deprecated, so Django 1.8 uses the
specific underlying privileges instead. This changes the privileges required
of the main user for running tests (unless the project is configured to avoid
creating a test user). The exact privileges required now are detailed in
<a class="reference internal" href="../ref/databases.html#oracle-notes"><em>Oracle notes</em></a>.</p>
</div>
<div class="section" id="s-abstractuser-last-login-allows-null-values">
<span id="abstractuser-last-login-allows-null-values"></span><h3><tt class="docutils literal"><span class="pre">AbstractUser.last_login</span></tt> allows null values<a class="headerlink" href="#abstractuser-last-login-allows-null-values" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../ref/contrib/auth.html#django.contrib.auth.models.User.last_login" title="django.contrib.auth.models.User.last_login"><tt class="xref py py-attr docutils literal"><span class="pre">AbstractUser.last_login</span></tt></a>
field now allows null values. Previously, it defaulted to the time when the user
was created which was misleading if the user never logged in. If you are using
the default user (<a class="reference internal" href="../ref/contrib/auth.html#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><tt class="xref py py-class docutils literal"><span class="pre">django.contrib.auth.models.User</span></tt></a>), run the database
migration included in <tt class="docutils literal"><span class="pre">contrib.auth</span></tt>.</p>
<p>If you are using a custom user model that inherits from <tt class="docutils literal"><span class="pre">AbstractUser</span></tt>,
you&#8217;ll need to run <a class="reference internal" href="../ref/django-admin.html#django-admin-makemigrations"><tt class="xref std std-djadmin docutils literal"><span class="pre">makemigrations</span></tt></a> and generate a migration for your
app that contains that model. Also, if wish to set <tt class="docutils literal"><span class="pre">last_login</span></tt> to <tt class="docutils literal"><span class="pre">NULL</span></tt>
for users who haven&#8217;t logged in, you can run this query:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">get_user_model</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">AbstractBaseUser</span>

<span class="n">UserModel</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
<span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">UserModel</span><span class="p">,</span> <span class="n">AbstractBaseUser</span><span class="p">):</span>
    <span class="n">UserModel</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">last_login</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">F</span><span class="p">(</span><span class="s">&#39;date_joined&#39;</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">last_login</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-id1">
<span id="id1"></span><h3><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.gis</span></tt></a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support for GEOS 3.1 and GDAL 1.6 has been dropped.</li>
<li>Support for SpatiaLite &lt; 2.4 has been dropped.</li>
<li>GIS-specific lookups have been refactored to use the
<a class="reference internal" href="../ref/models/lookups.html#django.db.models.Lookup" title="django.db.models.Lookup"><tt class="xref py py-class docutils literal"><span class="pre">django.db.models.Lookup</span></tt></a> API.</li>
<li>The default <tt class="docutils literal"><span class="pre">str</span></tt> representation of
<a class="reference internal" href="../ref/contrib/gis/geos.html#django.contrib.gis.geos.GEOSGeometry" title="django.contrib.gis.geos.GEOSGeometry"><tt class="xref py py-class docutils literal"><span class="pre">GEOSGeometry</span></tt></a> objects has been changed from
WKT to EWKT format (including the SRID). As this representation is used in
the serialization framework, that means that <tt class="docutils literal"><span class="pre">dumpdata</span></tt> output will now
contain the SRID value of geometry objects.</li>
</ul>
</div>
<div class="section" id="s-priority-of-context-processors-for-templateresponse-brought-in-line-with-render">
<span id="priority-of-context-processors-for-templateresponse-brought-in-line-with-render"></span><h3>Priority of context processors for <tt class="docutils literal"><span class="pre">TemplateResponse</span></tt> brought in line with <tt class="docutils literal"><span class="pre">render</span></tt><a class="headerlink" href="#priority-of-context-processors-for-templateresponse-brought-in-line-with-render" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../ref/template-response.html#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><tt class="xref py py-class docutils literal"><span class="pre">TemplateResponse</span></tt></a> constructor is designed to be a
drop-in replacement for the <a class="reference internal" href="../topics/http/shortcuts.html#django.shortcuts.render" title="django.shortcuts.render"><tt class="xref py py-func docutils literal"><span class="pre">render()</span></tt></a> function. However,
it had a slight incompatibility, in that for <tt class="docutils literal"><span class="pre">TemplateResponse</span></tt>, context data
from the passed in context dictionary could be shadowed by context data returned
from context processors, whereas for <tt class="docutils literal"><span class="pre">render</span></tt> it was the other way
around. This was a bug, and the behavior of <tt class="docutils literal"><span class="pre">render</span></tt> is more appropriate,
since it allows the globally defined context processors to be overridden locally
in the view. If you were relying on the fact context data in a
<tt class="docutils literal"><span class="pre">TemplateResponse</span></tt> could be overridden using a context processor, you will
need to change your code.</p>
</div>
<div class="section" id="s-overriding-setupclass-teardownclass-in-test-cases">
<span id="overriding-setupclass-teardownclass-in-test-cases"></span><h3>Overriding <tt class="docutils literal"><span class="pre">setUpClass</span></tt> / <tt class="docutils literal"><span class="pre">tearDownClass</span></tt> in test cases<a class="headerlink" href="#overriding-setupclass-teardownclass-in-test-cases" title="Permalink to this headline">¶</a></h3>
<p>The decorators <a class="reference internal" href="../topics/testing/tools.html#django.test.override_settings" title="django.test.override_settings"><tt class="xref py py-func docutils literal"><span class="pre">override_settings()</span></tt></a> and
<a class="reference internal" href="../topics/testing/tools.html#django.test.modify_settings" title="django.test.modify_settings"><tt class="xref py py-func docutils literal"><span class="pre">modify_settings()</span></tt></a> now act at the class level when used as
class decorators. As a consequence, when overriding <tt class="docutils literal"><span class="pre">setUpClass()</span></tt> or
<tt class="docutils literal"><span class="pre">tearDownClass()</span></tt>, the <tt class="docutils literal"><span class="pre">super</span></tt> implementation should always be called.</p>
</div>
<div class="section" id="s-removal-of-django-contrib-formtools">
<span id="removal-of-django-contrib-formtools"></span><h3>Removal of <tt class="docutils literal"><span class="pre">django.contrib.formtools</span></tt><a class="headerlink" href="#removal-of-django-contrib-formtools" title="Permalink to this headline">¶</a></h3>
<p>The formtools contrib app has been moved into a separate package.
<tt class="docutils literal"><span class="pre">django.contrib.formtools</span></tt> itself has been removed. The docs provide
<a class="reference internal" href="../ref/contrib/formtools/index.html#formtools-how-to-migrate"><em>migration instructions</em></a>.</p>
<p>The new package is available <a class="reference external" href="https://github.com/django/django-formtools/">on Github</a> and on PyPI.</p>
</div>
<div class="section" id="s-database-connection-reloading-between-tests">
<span id="database-connection-reloading-between-tests"></span><h3>Database connection reloading between tests<a class="headerlink" href="#database-connection-reloading-between-tests" title="Permalink to this headline">¶</a></h3>
<p>Django previously closed database connections between each test within a
<tt class="docutils literal"><span class="pre">TestCase</span></tt>. This is no longer the case as Django now wraps the whole
<tt class="docutils literal"><span class="pre">TestCase</span></tt> within a transaction. If some of your tests relied on the old
behavior, you should have them inherit from <tt class="docutils literal"><span class="pre">TransactionTestCase</span></tt> instead.</p>
</div>
<div class="section" id="s-cleanup-of-the-django-template-namespace">
<span id="cleanup-of-the-django-template-namespace"></span><h3>Cleanup of the <tt class="docutils literal"><span class="pre">django.template</span></tt> namespace<a class="headerlink" href="#cleanup-of-the-django-template-namespace" title="Permalink to this headline">¶</a></h3>
<p>If you&#8217;ve been relying on private APIs exposed in the <tt class="docutils literal"><span class="pre">django.template</span></tt>
module, you may have to import them from <tt class="docutils literal"><span class="pre">django.template.base</span></tt> instead.</p>
<p>Also private APIs <tt class="docutils literal"><span class="pre">django.template.base.compile_string()</span></tt>,
<tt class="docutils literal"><span class="pre">django.template.loader.find_template()</span></tt>, and
<tt class="docutils literal"><span class="pre">django.template.loader.get_template_from_string()</span></tt> were removed.</p>
</div>
<div class="section" id="s-model-attribute-on-private-model-relations">
<span id="model-attribute-on-private-model-relations"></span><h3><tt class="docutils literal"><span class="pre">model</span></tt> attribute on private model relations<a class="headerlink" href="#model-attribute-on-private-model-relations" title="Permalink to this headline">¶</a></h3>
<p>In earlier versions of Django, on a model with a reverse foreign key
relationship (for example), <tt class="docutils literal"><span class="pre">model._meta.get_all_related_objects()</span></tt> returned
the relationship as a <tt class="docutils literal"><span class="pre">django.db.models.related.RelatedObject</span></tt> with the
<tt class="docutils literal"><span class="pre">model</span></tt> attribute set to the source of the relationship. Now, this method
returns the relationship as <tt class="docutils literal"><span class="pre">django.db.models.fields.related.ManyToOneRel</span></tt>
(private API <tt class="docutils literal"><span class="pre">RelatedObject</span></tt> has been removed), and the <tt class="docutils literal"><span class="pre">model</span></tt> attribute
is set to the target of the relationship instead of the source. The source
model is accessible on the <tt class="docutils literal"><span class="pre">related_model</span></tt> attribute instead.</p>
<p>Consider this example from the tutorial in Django 1.8:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_related_objects</span><span class="p">()</span>
<span class="go">[&lt;ManyToOneRel: polls.choice&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_related_objects</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">model</span>
<span class="go">&lt;class &#39;polls.models.Poll&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_related_objects</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">related_model</span>
<span class="go">&lt;class &#39;polls.models.Choice&#39;&gt;</span>
</pre></div>
</div>
<p>and compare it to the behavior on older versions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_related_objects</span><span class="p">()</span>
<span class="go">[&lt;RelatedObject: polls:choice related to poll&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_related_objects</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">model</span>
<span class="go">&lt;class &#39;polls.models.Choice&#39;&gt;</span>
</pre></div>
</div>
<p>To access the source model, you can use a pattern like this to write code that
will work with both Django 1.8 and older versions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">relation</span> <span class="ow">in</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_all_related_objects</span><span class="p">():</span>
    <span class="n">to_model</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">relation</span><span class="p">,</span> <span class="s">&#39;related_model&#39;</span><span class="p">,</span> <span class="n">relation</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<p>Also note that <tt class="docutils literal"><span class="pre">get_all_related_objects()</span></tt> is deprecated in 1.8. See the
<a class="reference internal" href="../ref/models/meta.html#migrating-old-meta-api"><em>upgrade guide</em></a> for the new API.</p>
</div>
<div class="section" id="s-database-backend-api">
<span id="database-backend-api"></span><h3>Database backend API<a class="headerlink" href="#database-backend-api" title="Permalink to this headline">¶</a></h3>
<p>The following changes to the database backend API are documented to assist
those writing third-party backends in updating their code:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">BaseDatabaseXXX</span></tt> classes have been moved to <tt class="docutils literal"><span class="pre">django.db.backends.base</span></tt>.
Please import them from the new locations:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db.backends.base.base</span> <span class="kn">import</span> <span class="n">BaseDatabaseWrapper</span>
<span class="kn">from</span> <span class="nn">django.db.backends.base.client</span> <span class="kn">import</span> <span class="n">BaseDatabaseClient</span>
<span class="kn">from</span> <span class="nn">django.db.backends.base.creation</span> <span class="kn">import</span> <span class="n">BaseDatabaseCreation</span>
<span class="kn">from</span> <span class="nn">django.db.backends.base.features</span> <span class="kn">import</span> <span class="n">BaseDatabaseFeatures</span>
<span class="kn">from</span> <span class="nn">django.db.backends.base.introspection</span> <span class="kn">import</span> <span class="n">BaseDatabaseIntrospection</span>
<span class="kn">from</span> <span class="nn">django.db.backends.base.introspection</span> <span class="kn">import</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">TableInfo</span>
<span class="kn">from</span> <span class="nn">django.db.backends.base.operations</span> <span class="kn">import</span> <span class="n">BaseDatabaseOperations</span>
<span class="kn">from</span> <span class="nn">django.db.backends.base.schema</span> <span class="kn">import</span> <span class="n">BaseDatabaseSchemaEditor</span>
<span class="kn">from</span> <span class="nn">django.db.backends.base.validation</span> <span class="kn">import</span> <span class="n">BaseDatabaseValidation</span>
</pre></div>
</div>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">data_types</span></tt>, <tt class="docutils literal"><span class="pre">data_types_suffix</span></tt>, and
<tt class="docutils literal"><span class="pre">data_type_check_constraints</span></tt> attributes have moved from the
<tt class="docutils literal"><span class="pre">DatabaseCreation</span></tt> class to <tt class="docutils literal"><span class="pre">DatabaseWrapper</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">SQLCompiler.as_sql()</span></tt> method now takes a <tt class="docutils literal"><span class="pre">subquery</span></tt> parameter
(<a class="reference external" href="https://code.djangoproject.com/ticket/24164">#24164</a>).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">BaseDatabaseOperations.date_interval_sql()</span></tt> method now only takes a
<tt class="docutils literal"><span class="pre">timedelta</span></tt> parameter.</p>
</li>
</ul>
</div>
<div class="section" id="s-id2">
<span id="id2"></span><h3><a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.admin</span></tt></a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">AdminSite</span></tt> no longer takes an <tt class="docutils literal"><span class="pre">app_name</span></tt> argument and its <tt class="docutils literal"><span class="pre">app_name</span></tt>
attribute has been removed. The application name is always <tt class="docutils literal"><span class="pre">admin</span></tt> (as
opposed to the instance name which you can still customize using
<tt class="docutils literal"><span class="pre">AdminSite(name=&quot;...&quot;)</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">ModelAdmin.get_object()</span></tt> method (private API) now takes a third
argument named <tt class="docutils literal"><span class="pre">from_field</span></tt> in order to specify which field should match
the provided <tt class="docutils literal"><span class="pre">object_id</span></tt>.</li>
<li>The <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.response_delete" title="django.contrib.admin.ModelAdmin.response_delete"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.response_delete()</span></tt></a> method
now takes a second argument named <tt class="docutils literal"><span class="pre">obj_id</span></tt> which is the serialized
identifier used to retrieve the object before deletion.</li>
</ul>
</div>
<div class="section" id="s-default-autoescaping-of-functions-in-django-template-defaultfilters">
<span id="default-autoescaping-of-functions-in-django-template-defaultfilters"></span><h3>Default autoescaping of functions in <tt class="docutils literal"><span class="pre">django.template.defaultfilters</span></tt><a class="headerlink" href="#default-autoescaping-of-functions-in-django-template-defaultfilters" title="Permalink to this headline">¶</a></h3>
<p>In order to make built-in template filters that output HTML &#8220;safe by default&#8221;
when calling them in Python code, the following functions in
<tt class="docutils literal"><span class="pre">django.template.defaultfilters</span></tt> have been changed to automatically escape
their input value:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">join</span></tt></li>
<li><tt class="docutils literal"><span class="pre">linebreaksbr</span></tt></li>
<li><tt class="docutils literal"><span class="pre">linebreaks_filter</span></tt></li>
<li><tt class="docutils literal"><span class="pre">linenumbers</span></tt></li>
<li><tt class="docutils literal"><span class="pre">unordered_list</span></tt></li>
<li><tt class="docutils literal"><span class="pre">urlize</span></tt></li>
<li><tt class="docutils literal"><span class="pre">urlizetrunc</span></tt></li>
</ul>
<p>You can revert to the old behavior by specifying <tt class="docutils literal"><span class="pre">autoescape=False</span></tt> if you
are passing trusted content. This change doesn&#8217;t have any effect when using
the corresponding filters in templates.</p>
</div>
<div class="section" id="s-miscellaneous">
<span id="miscellaneous"></span><h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">connections.queries</span></tt> is now a read-only attribute.</li>
<li>Database connections are considered equal only if they&#8217;re the same object.
They aren&#8217;t hashable any more.</li>
<li><a class="reference internal" href="../ref/middleware.html#django.middleware.gzip.GZipMiddleware" title="django.middleware.gzip.GZipMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">GZipMiddleware</span></tt></a> used to disable compression
for some content types when the request is from Internet Explorer, in order
to work around a bug in IE6 and earlier. This behavior could affect
performance on IE7 and later. It was removed.</li>
<li><tt class="docutils literal"><span class="pre">URLField.to_python</span></tt> no longer adds a trailing slash to pathless URLs.</li>
<li>The <a class="reference internal" href="../ref/templates/builtins.html#std:templatefilter-length"><tt class="xref std std-tfilter docutils literal"><span class="pre">length</span></tt></a> template filter now returns <tt class="docutils literal"><span class="pre">0</span></tt> for an undefined
variable, rather than an empty string.</li>
<li><tt class="docutils literal"><span class="pre">ForeignKey.default_error_message['invalid']</span></tt> has been changed from
<tt class="docutils literal"><span class="pre">'%(model)s</span> <span class="pre">instance</span> <span class="pre">with</span> <span class="pre">pk</span> <span class="pre">%(pk)r</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">exist.'</span></tt> to
<tt class="docutils literal"><span class="pre">'%(model)s</span> <span class="pre">instance</span> <span class="pre">with</span> <span class="pre">%(field)s</span> <span class="pre">%(value)r</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">exist.'</span></tt> If you are
using this message in your own code, please update the list of interpolated
parameters. Internally, Django will continue to provide the
<tt class="docutils literal"><span class="pre">pk</span></tt> parameter in <tt class="docutils literal"><span class="pre">params</span></tt> for backwards compatibility.</li>
<li><tt class="docutils literal"><span class="pre">UserCreationForm.errors_messages['duplicate_username']</span></tt> is no longer used.
If you wish to customize that error message, <a class="reference internal" href="../topics/forms/modelforms.html#modelforms-overriding-default-fields"><em>override it on the form</em></a> using the <tt class="docutils literal"><span class="pre">'unique'</span></tt> key in
<tt class="docutils literal"><span class="pre">Meta.errors_messages['username']</span></tt> or, if you have a custom form field for
<tt class="docutils literal"><span class="pre">'username'</span></tt>, using the the <tt class="docutils literal"><span class="pre">'unique'</span></tt> key in its
<a class="reference internal" href="../ref/forms/fields.html#django.forms.Field.error_messages" title="django.forms.Field.error_messages"><tt class="xref py py-attr docutils literal"><span class="pre">error_messages</span></tt></a> argument.</li>
<li>The block <tt class="docutils literal"><span class="pre">usertools</span></tt> in the <tt class="docutils literal"><span class="pre">base.html</span></tt> template of
<a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.admin</span></tt></a> now requires the <tt class="docutils literal"><span class="pre">has_permission</span></tt> context
variable to be set. If you have any custom admin views that use this
template, update them to pass <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.has_permission" title="django.contrib.admin.AdminSite.has_permission"><tt class="xref py py-meth docutils literal"><span class="pre">AdminSite.has_permission()</span></tt></a> as this new variable&#8217;s
value or simply include <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.each_context" title="django.contrib.admin.AdminSite.each_context"><tt class="xref py py-meth docutils literal"><span class="pre">AdminSite.each_context(request)</span></tt></a> in the context.</li>
<li>Internal changes were made to the <a class="reference internal" href="../ref/forms/widgets.html#django.forms.ClearableFileInput" title="django.forms.ClearableFileInput"><tt class="xref py py-class docutils literal"><span class="pre">ClearableFileInput</span></tt></a>
widget to allow more customization. The undocumented <tt class="docutils literal"><span class="pre">url_markup_template</span></tt>
attribute was removed in favor of <tt class="docutils literal"><span class="pre">template_with_initial</span></tt>.</li>
<li>For consistency with other major vendors, the <tt class="docutils literal"><span class="pre">en_GB</span></tt> locale now has Monday
as the first day of the week.</li>
<li>Seconds have been removed from any locales that had them in <tt class="docutils literal"><span class="pre">TIME_FORMAT</span></tt>,
<tt class="docutils literal"><span class="pre">DATETIME_FORMAT</span></tt>, or <tt class="docutils literal"><span class="pre">SHORT_DATETIME_FORMAT</span></tt>.</li>
<li>The default max size of the Oracle test tablespace has increased from 300M
(or 200M, before 1.7.2) to 500M.</li>
<li><a class="reference internal" href="../ref/urlresolvers.html#django.core.urlresolvers.reverse" title="django.core.urlresolvers.reverse"><tt class="xref py py-func docutils literal"><span class="pre">reverse()</span></tt></a> and
<a class="reference internal" href="../ref/urlresolvers.html#django.core.urlresolvers.reverse_lazy" title="django.core.urlresolvers.reverse_lazy"><tt class="xref py py-func docutils literal"><span class="pre">reverse_lazy()</span></tt></a> now return Unicode strings
instead of byte strings.</li>
<li>The <tt class="docutils literal"><span class="pre">CacheClass</span></tt> shim has been removed from all cache backends.
These aliases were provided for backwards compatibility with Django 1.3.
If you are still using them, please update your project to use the real
class name found in the <a class="reference internal" href="../ref/settings.html#std:setting-CACHES-BACKEND"><tt class="xref std std-setting docutils literal"><span class="pre">BACKEND</span></tt></a> key of the
<a class="reference internal" href="../ref/settings.html#std:setting-CACHES"><tt class="xref std std-setting docutils literal"><span class="pre">CACHES</span></tt></a> setting.</li>
<li>By default, <a class="reference internal" href="../ref/django-admin.html#call-command"><em>call_command</em></a> now always skips the check
framework (unless you pass it <tt class="docutils literal"><span class="pre">skip_checks=False</span></tt>).</li>
<li>When iterating over lines, <a class="reference internal" href="../ref/files/file.html#django.core.files.File" title="django.core.files.File"><tt class="xref py py-class docutils literal"><span class="pre">File</span></tt></a> now uses
<a class="reference external" href="https://www.python.org/dev/peps/pep-0278">universal newlines</a>. The following are recognized as ending a line: the
Unix end-of-line convention <tt class="docutils literal"><span class="pre">'\n'</span></tt>, the Windows convention <tt class="docutils literal"><span class="pre">'\r\n'</span></tt>, and
the old Macintosh convention <tt class="docutils literal"><span class="pre">'\r'</span></tt>.</li>
<li>The Memcached cache backends <tt class="docutils literal"><span class="pre">MemcachedCache</span></tt> and <tt class="docutils literal"><span class="pre">PyLibMCCache</span></tt> will
delete a key if <tt class="docutils literal"><span class="pre">set()</span></tt> fails. This is necessary to ensure the <tt class="docutils literal"><span class="pre">cache_db</span></tt>
session store always fetches the most current session data.</li>
<li>Private APIs <tt class="docutils literal"><span class="pre">override_template_loaders</span></tt> and <tt class="docutils literal"><span class="pre">override_with_test_loader</span></tt>
in <tt class="docutils literal"><span class="pre">django.test.utils</span></tt> were removed. Override <tt class="docutils literal"><span class="pre">TEMPLATES</span></tt> with
<tt class="docutils literal"><span class="pre">override_settings</span></tt> instead.</li>
<li>Warnings from the MySQL database backend are no longer converted to
exceptions when <a class="reference internal" href="../ref/settings.html#std:setting-DEBUG"><tt class="xref std std-setting docutils literal"><span class="pre">DEBUG</span></tt></a> is <tt class="docutils literal"><span class="pre">True</span></tt>.</li>
<li><a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><tt class="xref py py-class docutils literal"><span class="pre">HttpRequest</span></tt></a> now has a simplified <tt class="docutils literal"><span class="pre">repr</span></tt> (e.g.
<tt class="docutils literal"><span class="pre">&lt;WSGIRequest:</span> <span class="pre">GET</span> <span class="pre">'/somepath/'&gt;</span></tt>). This won&#8217;t change the behavior of
the <a class="reference internal" href="../howto/error-reporting.html#django.views.debug.SafeExceptionReporterFilter" title="django.views.debug.SafeExceptionReporterFilter"><tt class="xref py py-class docutils literal"><span class="pre">SafeExceptionReporterFilter</span></tt></a> class.</li>
<li>Class-based views that use <a class="reference internal" href="../ref/class-based-views/mixins-editing.html#django.views.generic.edit.ModelFormMixin" title="django.views.generic.edit.ModelFormMixin"><tt class="xref py py-class docutils literal"><span class="pre">ModelFormMixin</span></tt></a>
will raise an <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.ImproperlyConfigured" title="django.core.exceptions.ImproperlyConfigured"><tt class="xref py py-exc docutils literal"><span class="pre">ImproperlyConfigured</span></tt></a> exception
when both the <tt class="docutils literal"><span class="pre">fields</span></tt> and <tt class="docutils literal"><span class="pre">form_class</span></tt> attributes are specified.
Previously, <tt class="docutils literal"><span class="pre">fields</span></tt> was silently ignored.</li>
<li>When following redirects, the test client now raises
<a class="reference internal" href="../ref/exceptions.html#django.test.client.RedirectCycleError" title="django.test.client.RedirectCycleError"><tt class="xref py py-exc docutils literal"><span class="pre">RedirectCycleError</span></tt></a> if it detects a loop or hits a
maximum redirect limit (rather than passing silently).</li>
<li>Translatable strings set as the <tt class="docutils literal"><span class="pre">default</span></tt> parameter of the field are cast
to concrete strings later, so the return type of <tt class="docutils literal"><span class="pre">Field.get_default()</span></tt> is
different in some cases. There is no change to default values which are the
result of a callable.</li>
<li><tt class="docutils literal"><span class="pre">GenericIPAddressField.empty_strings_allowed</span></tt> is now <tt class="docutils literal"><span class="pre">False</span></tt>. Database
backends that interpret empty strings as null (only Oracle among the backends
that Django includes) will no longer convert null values back to an empty
string. This is consistent with other backends.</li>
<li>When the <a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.BaseCommand.leave_locale_alone" title="django.core.management.BaseCommand.leave_locale_alone"><tt class="xref py py-attr docutils literal"><span class="pre">leave_locale_alone</span></tt></a>
attribute is <tt class="docutils literal"><span class="pre">False</span></tt>, translations are now deactivated instead of forcing
the &#8220;en-us&#8221; locale. In the case your models contained non-English strings and
you counted on English translations to be activated in management commands,
this will not happen any longer. It might be that new database migrations are
generated (once) after migrating to 1.8.</li>
<li><a class="reference internal" href="../ref/utils.html#django.utils.translation.get_language" title="django.utils.translation.get_language"><tt class="xref py py-func docutils literal"><span class="pre">django.utils.translation.get_language()</span></tt></a> now returns <tt class="docutils literal"><span class="pre">None</span></tt> instead
of <a class="reference internal" href="../ref/settings.html#std:setting-LANGUAGE_CODE"><tt class="xref std std-setting docutils literal"><span class="pre">LANGUAGE_CODE</span></tt></a> when translations are temporarily deactivated.</li>
<li>The <tt class="docutils literal"><span class="pre">name</span></tt> field of <a class="reference internal" href="../ref/contrib/contenttypes.html#django.contrib.contenttypes.models.ContentType" title="django.contrib.contenttypes.models.ContentType"><tt class="xref py py-class docutils literal"><span class="pre">django.contrib.contenttypes.models.ContentType</span></tt></a>
has been removed by a migration and replaced by a property. That means it&#8217;s
not possible to query or filter a <tt class="docutils literal"><span class="pre">ContentType</span></tt> by this field any longer.</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-migrate"><tt class="xref std std-djadmin docutils literal"><span class="pre">migrate</span></tt></a> now accepts the <a class="reference internal" href="../ref/django-admin.html#django-admin-option---fake-initial"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--fake-initial</span></tt></a> option to
allow faking initial migrations. In 1.7 initial migrations were always
automatically faked if all tables created in an initial migration already
existed.</li>
</ul>
</div>
</div>
<div class="section" id="s-features-deprecated-in-1-8">
<span id="s-deprecated-features-1-8"></span><span id="features-deprecated-in-1-8"></span><span id="deprecated-features-1-8"></span><h2>Features deprecated in 1.8<a class="headerlink" href="#features-deprecated-in-1-8" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-selected-methods-in-django-db-models-options-options">
<span id="selected-methods-in-django-db-models-options-options"></span><h3>Selected methods in <tt class="docutils literal"><span class="pre">django.db.models.options.Options</span></tt><a class="headerlink" href="#selected-methods-in-django-db-models-options-options" title="Permalink to this headline">¶</a></h3>
<p>As part of the formalization of the <tt class="docutils literal"><span class="pre">Model._meta</span></tt> API (from the
<a class="reference internal" href="../ref/models/meta.html#django.db.models.options.Options" title="django.db.models.options.Options"><tt class="xref py py-class docutils literal"><span class="pre">django.db.models.options.Options</span></tt></a> class), a number of methods have been
deprecated and will be removed in Django 2.0:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">get_all_field_names()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">get_all_related_objects()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">get_all_related_objects_with_model()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">get_all_related_many_to_many_objects()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">get_all_related_m2m_objects_with_model()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">get_concrete_fields_with_model()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">get_field_by_name()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">get_fields_with_model()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">get_m2m_with_model()</span></tt></li>
</ul>
<p>A <a class="reference internal" href="../ref/models/meta.html#migrating-old-meta-api"><em>migration guide</em></a> has been provided to assist
in converting your code from the old API to the new, official API.</p>
</div>
<div class="section" id="s-loading-cycle-and-firstof-template-tags-from-future-library">
<span id="loading-cycle-and-firstof-template-tags-from-future-library"></span><h3>Loading <tt class="docutils literal"><span class="pre">cycle</span></tt> and <tt class="docutils literal"><span class="pre">firstof</span></tt> template tags from <tt class="docutils literal"><span class="pre">future</span></tt> library<a class="headerlink" href="#loading-cycle-and-firstof-template-tags-from-future-library" title="Permalink to this headline">¶</a></h3>
<p>Django 1.6 introduced <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">cycle</span> <span class="pre">from</span> <span class="pre">future</span> <span class="pre">%}</span></tt> and
<tt class="docutils literal"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">firstof</span> <span class="pre">from</span> <span class="pre">future</span> <span class="pre">%}</span></tt> syntax for forward compatibility of the
<a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-cycle"><tt class="xref std std-ttag docutils literal"><span class="pre">cycle</span></tt></a> and <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-firstof"><tt class="xref std std-ttag docutils literal"><span class="pre">firstof</span></tt></a> template tags. This syntax is now deprecated
and will be removed in Django 2.0. You can simply remove the
<tt class="docutils literal"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">...</span> <span class="pre">from</span> <span class="pre">future</span> <span class="pre">%}</span></tt> tags.</p>
</div>
<div class="section" id="s-django-conf-urls-patterns">
<span id="django-conf-urls-patterns"></span><h3><tt class="docutils literal"><span class="pre">django.conf.urls.patterns()</span></tt><a class="headerlink" href="#django-conf-urls-patterns" title="Permalink to this headline">¶</a></h3>
<p>In the olden days of Django, it was encouraged to reference views as strings
in <tt class="docutils literal"><span class="pre">urlpatterns</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">url</span><span class="p">(</span><span class="s">&#39;^$&#39;</span><span class="p">,</span> <span class="s">&#39;myapp.views.myview&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>and Django would magically import <tt class="docutils literal"><span class="pre">myapp.views.myview</span></tt> internally and turn
the string into a real function reference. In order to reduce repetition when
referencing many views from the same module, the <tt class="docutils literal"><span class="pre">patterns()</span></tt> function takes
a required initial <tt class="docutils literal"><span class="pre">prefix</span></tt> argument which is prepended to all
views-as-strings in that set of <tt class="docutils literal"><span class="pre">urlpatterns</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;myapp.views&#39;</span><span class="p">,</span>
    <span class="n">url</span><span class="p">(</span><span class="s">&#39;^$&#39;</span><span class="p">,</span> <span class="s">&#39;myview&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">&#39;^other/$&#39;</span><span class="p">,</span> <span class="s">&#39;otherview&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In the modern era, we have updated the tutorial to instead recommend importing
your views module and referencing your view functions (or classes) directly.
This has a number of advantages, all deriving from the fact that we are using
normal Python in place of &#8220;Django String Magic&#8221;: the errors when you mistype a
view name are less obscure, IDEs can help with autocompletion of view names,
etc.</p>
<p>So these days, the above use of the <tt class="docutils literal"><span class="pre">prefix</span></tt> arg is much more likely to be
written (and is better written) as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">myapp</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">url</span><span class="p">(</span><span class="s">&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">myview</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">&#39;^other/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">otherview</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Thus <tt class="docutils literal"><span class="pre">patterns()</span></tt> serves little purpose and is a burden when teaching new users
(answering the newbie&#8217;s question &#8220;why do I need this empty string as the first
argument to <tt class="docutils literal"><span class="pre">patterns()</span></tt>?&#8221;). For these reasons, we are deprecating it.
Updating your code is as simple as ensuring that <tt class="docutils literal"><span class="pre">urlpatterns</span></tt> is a list of
<a class="reference internal" href="../ref/urls.html#django.conf.urls.url" title="django.conf.urls.url"><tt class="xref py py-func docutils literal"><span class="pre">django.conf.urls.url()</span></tt></a> instances. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">myapp</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">myview</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">&#39;^other/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">otherview</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="s-passing-a-string-as-view-to-url">
<span id="passing-a-string-as-view-to-url"></span><h3>Passing a string as <tt class="docutils literal"><span class="pre">view</span></tt> to <a class="reference internal" href="../ref/urls.html#django.conf.urls.url" title="django.conf.urls.url"><tt class="xref py py-func docutils literal"><span class="pre">url()</span></tt></a><a class="headerlink" href="#passing-a-string-as-view-to-url" title="Permalink to this headline">¶</a></h3>
<p>Related to the previous item, referencing views as strings in the <tt class="docutils literal"><span class="pre">url()</span></tt>
function is deprecated. Pass the callable view as described in the previous
section instead.</p>
</div>
<div class="section" id="s-template-related-settings">
<span id="template-related-settings"></span><h3>Template-related settings<a class="headerlink" href="#template-related-settings" title="Permalink to this headline">¶</a></h3>
<p>As a consequence of the multiple template engines refactor, several settings
are deprecated in favor of <a class="reference internal" href="../ref/settings.html#std:setting-TEMPLATES"><tt class="xref std std-setting docutils literal"><span class="pre">TEMPLATES</span></tt></a>:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">ALLOWED_INCLUDE_ROOTS</span></tt></li>
<li><tt class="docutils literal"><span class="pre">TEMPLATE_CONTEXT_PROCESSORS</span></tt></li>
<li><tt class="docutils literal"><span class="pre">TEMPLATE_DEBUG</span></tt></li>
<li><tt class="docutils literal"><span class="pre">TEMPLATE_DIRS</span></tt></li>
<li><tt class="docutils literal"><span class="pre">TEMPLATE_LOADERS</span></tt></li>
<li><tt class="docutils literal"><span class="pre">TEMPLATE_STRING_IF_INVALID</span></tt></li>
</ul>
</div>
<div class="section" id="s-django-core-context-processors">
<span id="django-core-context-processors"></span><h3><tt class="docutils literal"><span class="pre">django.core.context_processors</span></tt><a class="headerlink" href="#django-core-context-processors" title="Permalink to this headline">¶</a></h3>
<p>Built-in template context processors have been moved to
<tt class="docutils literal"><span class="pre">django.template.context_processors</span></tt>.</p>
</div>
<div class="section" id="s-django-test-simpletestcase-urls">
<span id="django-test-simpletestcase-urls"></span><h3><tt class="docutils literal"><span class="pre">django.test.SimpleTestCase.urls</span></tt><a class="headerlink" href="#django-test-simpletestcase-urls" title="Permalink to this headline">¶</a></h3>
<p>The attribute <a class="reference internal" href="../topics/testing/tools.html#django.test.SimpleTestCase.urls" title="django.test.SimpleTestCase.urls"><tt class="xref py py-attr docutils literal"><span class="pre">SimpleTestCase.urls</span></tt></a>
for specifying URLconf configuration in tests has been deprecated and will be
removed in Django 2.0. Use <a class="reference internal" href="../topics/testing/tools.html#django.test.override_settings" title="django.test.override_settings"><tt class="xref py py-func docutils literal"><span class="pre">&#64;override_settings(ROOT_URLCONF=...)</span></tt></a> instead.</p>
</div>
<div class="section" id="s-prefix-argument-to-i18n-patterns">
<span id="prefix-argument-to-i18n-patterns"></span><h3><tt class="docutils literal"><span class="pre">prefix</span></tt> argument to <a class="reference internal" href="../topics/i18n/translation.html#django.conf.urls.i18n.i18n_patterns" title="django.conf.urls.i18n.i18n_patterns"><tt class="xref py py-func docutils literal"><span class="pre">i18n_patterns()</span></tt></a><a class="headerlink" href="#prefix-argument-to-i18n-patterns" title="Permalink to this headline">¶</a></h3>
<p>Related to the previous item, the <tt class="docutils literal"><span class="pre">prefix</span></tt> argument to
<a class="reference internal" href="../topics/i18n/translation.html#django.conf.urls.i18n.i18n_patterns" title="django.conf.urls.i18n.i18n_patterns"><tt class="xref py py-func docutils literal"><span class="pre">django.conf.urls.i18n.i18n_patterns()</span></tt></a> has been deprecated. Simply pass a
list of <a class="reference internal" href="../ref/urls.html#django.conf.urls.url" title="django.conf.urls.url"><tt class="xref py py-func docutils literal"><span class="pre">django.conf.urls.url()</span></tt></a> instances instead.</p>
</div>
<div class="section" id="s-using-an-incorrect-count-of-unpacked-values-in-the-for-template-tag">
<span id="using-an-incorrect-count-of-unpacked-values-in-the-for-template-tag"></span><h3>Using an incorrect count of unpacked values in the <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-for"><tt class="xref std std-ttag docutils literal"><span class="pre">for</span></tt></a> template tag<a class="headerlink" href="#using-an-incorrect-count-of-unpacked-values-in-the-for-template-tag" title="Permalink to this headline">¶</a></h3>
<p>Using an incorrect count of unpacked values in <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-for"><tt class="xref std std-ttag docutils literal"><span class="pre">for</span></tt></a> tag will raise an
exception rather than fail silently in Django 2.0.</p>
</div>
<div class="section" id="s-passing-a-dotted-path-to-reverse-and-url">
<span id="passing-a-dotted-path-to-reverse-and-url"></span><h3>Passing a dotted path to <a class="reference internal" href="../ref/urlresolvers.html#django.core.urlresolvers.reverse" title="django.core.urlresolvers.reverse"><tt class="xref py py-func docutils literal"><span class="pre">reverse()</span></tt></a> and <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-url"><tt class="xref std std-ttag docutils literal"><span class="pre">url</span></tt></a><a class="headerlink" href="#passing-a-dotted-path-to-reverse-and-url" title="Permalink to this headline">¶</a></h3>
<p>Reversing URLs by Python path is an expensive operation as it causes the
path being reversed to be imported. This behavior has also resulted in a
<a class="reference external" href="https://www.djangoproject.com/weblog/2014/apr/21/security/#s-issue-unexpected-code-execution-using-reverse">security issue</a>. Use <a class="reference internal" href="../topics/http/urls.html#naming-url-patterns"><em>named URL patterns</em></a>
for reversing instead.</p>
<p>If you are using <a class="reference internal" href="../ref/contrib/sitemaps.html#module-django.contrib.sitemaps" title="django.contrib.sitemaps: A framework for generating Google sitemap XML files."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.sitemaps</span></tt></a>, add the <tt class="docutils literal"><span class="pre">name</span></tt> argument to
the <tt class="docutils literal"><span class="pre">url</span></tt> that references <a class="reference internal" href="../ref/contrib/sitemaps.html#django.contrib.sitemaps.views.sitemap" title="django.contrib.sitemaps.views.sitemap"><tt class="xref py py-func docutils literal"><span class="pre">django.contrib.sitemaps.views.sitemap()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.sitemaps.views</span> <span class="kn">import</span> <span class="n">sitemap</span>

<span class="n">url</span><span class="p">(</span><span class="s">r&#39;^sitemap\.xml$&#39;</span><span class="p">,</span> <span class="n">sitemap</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;sitemaps&#39;</span><span class="p">:</span> <span class="n">sitemaps</span><span class="p">},</span>
    <span class="n">name</span><span class="o">=</span><span class="s">&#39;django.contrib.sitemaps.views.sitemap&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>to ensure compatibility when reversing by Python path is removed in Django 2.0.</p>
<p>Similarly for GIS sitemaps, add <tt class="docutils literal"><span class="pre">name='django.contrib.gis.sitemaps.views.kml'</span></tt>
or <tt class="docutils literal"><span class="pre">name='django.contrib.gis.sitemaps.views.kmz'</span></tt>.</p>
</div>
<div class="section" id="s-aggregate-methods-and-modules">
<span id="aggregate-methods-and-modules"></span><h3>Aggregate methods and modules<a class="headerlink" href="#aggregate-methods-and-modules" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">django.db.models.sql.aggregates</span></tt> and
<tt class="docutils literal"><span class="pre">django.contrib.gis.db.models.sql.aggregates</span></tt> modules (both private API), have
been deprecated as <tt class="docutils literal"><span class="pre">django.db.models.aggregates</span></tt> and
<tt class="docutils literal"><span class="pre">django.contrib.gis.db.models.aggregates</span></tt> are now also responsible
for SQL generation. The old modules will be removed in Django 2.0.</p>
<p>If you were using the old modules, see <a class="reference internal" href="../ref/models/expressions.html"><em>Query Expressions</em></a> for instructions on rewriting custom aggregates
using the new stable API.</p>
<p>The following methods and properties of <tt class="docutils literal"><span class="pre">django.db.models.sql.query.Query</span></tt>
have also been deprecated and the backwards compatibility shims will be removed
in Django 2.0:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Query.aggregates</span></tt>, replaced by <tt class="docutils literal"><span class="pre">annotations</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">Query.aggregate_select</span></tt>, replaced by <tt class="docutils literal"><span class="pre">annotation_select</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">Query.add_aggregate()</span></tt>, replaced by <tt class="docutils literal"><span class="pre">add_annotation()</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">Query.set_aggregate_mask()</span></tt>, replaced by <tt class="docutils literal"><span class="pre">set_annotation_mask()</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">Query.append_aggregate_mask()</span></tt>, replaced by <tt class="docutils literal"><span class="pre">append_annotation_mask()</span></tt>.</li>
</ul>
</div>
<div class="section" id="s-extending-management-command-arguments-through-command-option-list">
<span id="extending-management-command-arguments-through-command-option-list"></span><h3>Extending management command arguments through <tt class="docutils literal"><span class="pre">Command.option_list</span></tt><a class="headerlink" href="#extending-management-command-arguments-through-command-option-list" title="Permalink to this headline">¶</a></h3>
<p>Management commands now use <a class="reference external" href="https://docs.python.org/3/library/argparse.html#module-argparse" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">argparse</span></tt></a> instead of <a class="reference external" href="https://docs.python.org/3/library/optparse.html#module-optparse" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">optparse</span></tt></a> to
parse command-line arguments passed to commands. This also means that the way
to add custom arguments to commands has changed: instead of extending the
<tt class="docutils literal"><span class="pre">option_list</span></tt> class list, you should now override the
<a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.BaseCommand.add_arguments" title="django.core.management.BaseCommand.add_arguments"><tt class="xref py py-meth docutils literal"><span class="pre">add_arguments()</span></tt></a> method and add
arguments through <tt class="docutils literal"><span class="pre">argparse.add_argument()</span></tt>. See
<a class="reference internal" href="../howto/custom-management-commands.html#custom-commands-options"><em>this example</em></a> for more details.</p>
</div>
<div class="section" id="s-django-core-management-noargscommand">
<span id="django-core-management-noargscommand"></span><h3><tt class="docutils literal"><span class="pre">django.core.management.NoArgsCommand</span></tt><a class="headerlink" href="#django-core-management-noargscommand" title="Permalink to this headline">¶</a></h3>
<p>The class <a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.NoArgsCommand" title="django.core.management.NoArgsCommand"><tt class="xref py py-class docutils literal"><span class="pre">NoArgsCommand</span></tt></a> is now deprecated and
will be removed in Django 2.0. Use <a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.BaseCommand" title="django.core.management.BaseCommand"><tt class="xref py py-class docutils literal"><span class="pre">BaseCommand</span></tt></a>
instead, which takes no arguments by default.</p>
</div>
<div class="section" id="s-listing-all-migrations-in-a-project">
<span id="listing-all-migrations-in-a-project"></span><h3>Listing all migrations in a project<a class="headerlink" href="#listing-all-migrations-in-a-project" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">--list</span></tt> option of the <a class="reference internal" href="../ref/django-admin.html#django-admin-migrate"><tt class="xref std std-djadmin docutils literal"><span class="pre">migrate</span></tt></a> management command is
deprecated and will be removed in Django 2.0. Use <a class="reference internal" href="../ref/django-admin.html#django-admin-showmigrations"><tt class="xref std std-djadmin docutils literal"><span class="pre">showmigrations</span></tt></a>
instead.</p>
</div>
<div class="section" id="s-cache-choices-option-of-modelchoicefield-and-modelmultiplechoicefield">
<span id="cache-choices-option-of-modelchoicefield-and-modelmultiplechoicefield"></span><h3><tt class="docutils literal"><span class="pre">cache_choices</span></tt> option of <tt class="docutils literal"><span class="pre">ModelChoiceField</span></tt> and <tt class="docutils literal"><span class="pre">ModelMultipleChoiceField</span></tt><a class="headerlink" href="#cache-choices-option-of-modelchoicefield-and-modelmultiplechoicefield" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelChoiceField" title="django.forms.ModelChoiceField"><tt class="xref py py-class docutils literal"><span class="pre">ModelChoiceField</span></tt></a> and
<a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelMultipleChoiceField" title="django.forms.ModelMultipleChoiceField"><tt class="xref py py-class docutils literal"><span class="pre">ModelMultipleChoiceField</span></tt></a> took an undocumented, untested
option <tt class="docutils literal"><span class="pre">cache_choices</span></tt>. This cached querysets between multiple renderings of
the same <tt class="docutils literal"><span class="pre">Form</span></tt> object. This option is subject to an accelerated deprecation
and will be removed in Django 1.9.</p>
</div>
<div class="section" id="s-django-template-resolve-variable">
<span id="django-template-resolve-variable"></span><h3><tt class="docutils literal"><span class="pre">django.template.resolve_variable()</span></tt><a class="headerlink" href="#django-template-resolve-variable" title="Permalink to this headline">¶</a></h3>
<p>The function has been informally marked as &#8220;Deprecated&#8221; for some time. Replace
<tt class="docutils literal"><span class="pre">resolve_variable(path,</span> <span class="pre">context)</span></tt> with
<tt class="docutils literal"><span class="pre">django.template.Variable(path).resolve(context)</span></tt>.</p>
</div>
<div class="section" id="s-django-contrib-webdesign">
<span id="django-contrib-webdesign"></span><h3><tt class="docutils literal"><span class="pre">django.contrib.webdesign</span></tt><a class="headerlink" href="#django-contrib-webdesign" title="Permalink to this headline">¶</a></h3>
<p>It provided the <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-lorem"><tt class="xref std std-ttag docutils literal"><span class="pre">lorem</span></tt></a> template tag which is now included in the
built-in tags. Simply remove <tt class="docutils literal"><span class="pre">'django.contrib.webdesign'</span></tt> from
<a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> and <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">webdesign</span> <span class="pre">%}</span></tt> from your templates.</p>
</div>
<div class="section" id="s-error-message-argument-to-django-forms-regexfield">
<span id="error-message-argument-to-django-forms-regexfield"></span><h3><tt class="docutils literal"><span class="pre">error_message</span></tt> argument to <tt class="docutils literal"><span class="pre">django.forms.RegexField</span></tt><a class="headerlink" href="#error-message-argument-to-django-forms-regexfield" title="Permalink to this headline">¶</a></h3>
<p>It provided backwards compatibility for pre-1.0 code, but its functionality is
redundant. Use <tt class="docutils literal"><span class="pre">Field.error_messages['invalid']</span></tt> instead.</p>
</div>
<div class="section" id="s-old-unordered-list-syntax">
<span id="old-unordered-list-syntax"></span><h3>Old <a class="reference internal" href="../ref/templates/builtins.html#std:templatefilter-unordered_list"><tt class="xref std std-tfilter docutils literal"><span class="pre">unordered_list</span></tt></a> syntax<a class="headerlink" href="#old-unordered-list-syntax" title="Permalink to this headline">¶</a></h3>
<p>An older (pre-1.0), more restrictive and verbose input format for the
<a class="reference internal" href="../ref/templates/builtins.html#std:templatefilter-unordered_list"><tt class="xref std std-tfilter docutils literal"><span class="pre">unordered_list</span></tt></a> template filter has been deprecated:</p>
<div class="highlight-python"><div class="highlight"><pre>``[&#39;States&#39;, [[&#39;Kansas&#39;, [[&#39;Lawrence&#39;, []], [&#39;Topeka&#39;, []]]], [&#39;Illinois&#39;, []]]]``
</pre></div>
</div>
<p>Using the new syntax, this becomes:</p>
<div class="highlight-python"><div class="highlight"><pre>``[&#39;States&#39;, [&#39;Kansas&#39;, [&#39;Lawrence&#39;, &#39;Topeka&#39;], &#39;Illinois&#39;]]``
</pre></div>
</div>
</div>
<div class="section" id="s-django-forms-field-has-changed">
<span id="django-forms-field-has-changed"></span><h3><tt class="docutils literal"><span class="pre">django.forms.Field._has_changed()</span></tt><a class="headerlink" href="#django-forms-field-has-changed" title="Permalink to this headline">¶</a></h3>
<p>Rename this method to <a class="reference internal" href="../ref/forms/fields.html#django.forms.Field.has_changed" title="django.forms.Field.has_changed"><tt class="xref py py-meth docutils literal"><span class="pre">has_changed()</span></tt></a> by removing the
leading underscore. The old name will still work until Django 2.0.</p>
</div>
<div class="section" id="s-django-utils-html-remove-tags-and-removetags-template-filter">
<span id="django-utils-html-remove-tags-and-removetags-template-filter"></span><h3><tt class="docutils literal"><span class="pre">django.utils.html.remove_tags()</span></tt> and <tt class="docutils literal"><span class="pre">removetags</span></tt> template filter<a class="headerlink" href="#django-utils-html-remove-tags-and-removetags-template-filter" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">django.utils.html.remove_tags()</span></tt> as well as the template filter
<tt class="docutils literal"><span class="pre">removetags</span></tt> have been deprecated as they cannot guarantee safe output. Their
existence is likely to lead to their use in security-sensitive contexts where
they are not actually safe.</p>
<p>The unused and undocumented <tt class="docutils literal"><span class="pre">django.utils.html.strip_entities()</span></tt> function has
also been deprecated.</p>
</div>
<div class="section" id="s-is-admin-site-argument-to-django-contrib-auth-views-password-reset">
<span id="is-admin-site-argument-to-django-contrib-auth-views-password-reset"></span><h3><tt class="docutils literal"><span class="pre">is_admin_site</span></tt> argument to <tt class="docutils literal"><span class="pre">django.contrib.auth.views.password_reset()</span></tt><a class="headerlink" href="#is-admin-site-argument-to-django-contrib-auth-views-password-reset" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s a legacy option that should no longer be necessary.</p>
</div>
<div class="section" id="s-subfieldbase">
<span id="subfieldbase"></span><h3><tt class="docutils literal"><span class="pre">SubfieldBase</span></tt><a class="headerlink" href="#subfieldbase" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">django.db.models.fields.subclassing.SubfieldBase</span></tt> has been deprecated and
will be removed in Django 2.0. Historically, it was used to handle fields where
type conversion was needed when loading from the database, but it was not used
in <tt class="docutils literal"><span class="pre">.values()</span></tt> calls or in aggregates. It has been replaced with
<a class="reference internal" href="../ref/models/fields.html#django.db.models.Field.from_db_value" title="django.db.models.Field.from_db_value"><tt class="xref py py-meth docutils literal"><span class="pre">from_db_value()</span></tt></a>. Note that the new approach does
not call the <a class="reference internal" href="../ref/models/fields.html#django.db.models.Field.to_python" title="django.db.models.Field.to_python"><tt class="xref py py-meth docutils literal"><span class="pre">to_python()</span></tt></a> method on assignment
as was the case with <tt class="docutils literal"><span class="pre">SubfieldBase</span></tt>.</p>
</div>
<div class="section" id="s-django-utils-checksums">
<span id="django-utils-checksums"></span><h3><tt class="docutils literal"><span class="pre">django.utils.checksums</span></tt><a class="headerlink" href="#django-utils-checksums" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">django.utils.checksums</span></tt> module has been deprecated and will be removed
in Django 2.0. The functionality it provided (validating checksum using the
Luhn algorithm) was undocumented and not used in Django. The module has been
moved to the <a class="reference external" href="https://pypi.python.org/pypi/django-localflavor">django-localflavor</a> package (version 1.1+).</p>
</div>
<div class="section" id="s-inlineadminform-original-content-type-id">
<span id="inlineadminform-original-content-type-id"></span><h3><tt class="docutils literal"><span class="pre">InlineAdminForm.original_content_type_id</span></tt><a class="headerlink" href="#inlineadminform-original-content-type-id" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">original_content_type_id</span></tt> attribute on <tt class="docutils literal"><span class="pre">InlineAdminForm</span></tt> has been
deprecated and will be removed in Django 2.0. Historically, it was used
to construct the &#8220;view on site&#8221; URL. This URL is now accessible using the
<tt class="docutils literal"><span class="pre">absolute_url</span></tt> attribute of the form.</p>
</div>
<div class="section" id="s-django-views-generic-edit-formmixin-get-form-s-form-class-argument">
<span id="django-views-generic-edit-formmixin-get-form-s-form-class-argument"></span><h3><tt class="docutils literal"><span class="pre">django.views.generic.edit.FormMixin.get_form()</span></tt>’s <tt class="docutils literal"><span class="pre">form_class</span></tt> argument<a class="headerlink" href="#django-views-generic-edit-formmixin-get-form-s-form-class-argument" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">FormMixin</span></tt> subclasses that override the <tt class="docutils literal"><span class="pre">get_form()</span></tt> method should make
sure to provide a default value for the <tt class="docutils literal"><span class="pre">form_class</span></tt> argument since it&#8217;s
now optional.</p>
</div>
<div class="section" id="s-rendering-templates-loaded-by-get-template-with-a-context">
<span id="rendering-templates-loaded-by-get-template-with-a-context"></span><h3>Rendering templates loaded by <a class="reference internal" href="../topics/templates.html#django.template.loader.get_template" title="django.template.loader.get_template"><tt class="xref py py-func docutils literal"><span class="pre">get_template()</span></tt></a> with a <a class="reference internal" href="../ref/templates/api.html#django.template.Context" title="django.template.Context"><tt class="xref py py-class docutils literal"><span class="pre">Context</span></tt></a><a class="headerlink" href="#rendering-templates-loaded-by-get-template-with-a-context" title="Permalink to this headline">¶</a></h3>
<p>The return type of <a class="reference internal" href="../topics/templates.html#django.template.loader.get_template" title="django.template.loader.get_template"><tt class="xref py py-func docutils literal"><span class="pre">get_template()</span></tt></a> has changed
in Django 1.8: instead of a <a class="reference internal" href="../ref/templates/api.html#django.template.Template" title="django.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">django.template.Template</span></tt></a>, it returns a
<tt class="docutils literal"><span class="pre">Template</span></tt> instance whose exact type depends on which backend loaded it.</p>
<p>Both classes provide a <tt class="docutils literal"><span class="pre">render()</span></tt> method, however, the former takes a
<a class="reference internal" href="../ref/templates/api.html#django.template.Context" title="django.template.Context"><tt class="xref py py-class docutils literal"><span class="pre">django.template.Context</span></tt></a> as an argument while the latter expects a
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a>. This change is enforced through a deprecation path for Django
templates.</p>
<p>Since it&#8217;s easier to understand with examples, the <a class="reference internal" href="../ref/templates/upgrading.html#get-template-upgrade-django-18"><em>upgrade guide</em></a> shows how to adapt affected code.</p>
<p>All this also applies to <a class="reference internal" href="../topics/templates.html#django.template.loader.select_template" title="django.template.loader.select_template"><tt class="xref py py-func docutils literal"><span class="pre">select_template()</span></tt></a>.</p>
</div>
<div class="section" id="s-template-and-context-classes-in-template-responses">
<span id="template-and-context-classes-in-template-responses"></span><h3><a class="reference internal" href="../ref/templates/api.html#django.template.Template" title="django.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">Template</span></tt></a> and <a class="reference internal" href="../ref/templates/api.html#django.template.Context" title="django.template.Context"><tt class="xref py py-class docutils literal"><span class="pre">Context</span></tt></a> classes in template responses<a class="headerlink" href="#template-and-context-classes-in-template-responses" title="Permalink to this headline">¶</a></h3>
<p>Some methods of <a class="reference internal" href="../ref/template-response.html#django.template.response.SimpleTemplateResponse" title="django.template.response.SimpleTemplateResponse"><tt class="xref py py-class docutils literal"><span class="pre">SimpleTemplateResponse</span></tt></a> and
<a class="reference internal" href="../ref/template-response.html#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><tt class="xref py py-class docutils literal"><span class="pre">TemplateResponse</span></tt></a> accepted
<a class="reference internal" href="../ref/templates/api.html#django.template.Context" title="django.template.Context"><tt class="xref py py-class docutils literal"><span class="pre">django.template.Context</span></tt></a> and <a class="reference internal" href="../ref/templates/api.html#django.template.Template" title="django.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">django.template.Template</span></tt></a> objects
as arguments. They should now receive <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> and backend-dependent
template objects respectively.</p>
<p>This also applies to the return types if you have subclassed either template
response class.</p>
<p>Check the <a class="reference internal" href="../ref/template-response.html"><em>template response API documentation</em></a>
for details.</p>
</div>
<div class="section" id="s-current-app-argument-of-template-related-apis">
<span id="current-app-argument-of-template-related-apis"></span><h3><tt class="docutils literal"><span class="pre">current_app</span></tt> argument of template-related APIs<a class="headerlink" href="#current-app-argument-of-template-related-apis" title="Permalink to this headline">¶</a></h3>
<p>The following functions and classes will no longer accept a <tt class="docutils literal"><span class="pre">current_app</span></tt>
parameter to set an URL namespace in Django 2.0:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">django.shortcuts.render()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.template.Context()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.template.RequestContext()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.template.response.TemplateResponse()</span></tt></li>
</ul>
<p>Set <tt class="docutils literal"><span class="pre">request.current_app</span></tt> instead, where <tt class="docutils literal"><span class="pre">request</span></tt> is the first argument
to these functions or classes. If you&#8217;re using a plain <tt class="docutils literal"><span class="pre">Context</span></tt>, use a
<tt class="docutils literal"><span class="pre">RequestContext</span></tt> instead.</p>
</div>
<div class="section" id="s-dictionary-and-context-instance-arguments-of-rendering-functions">
<span id="dictionary-and-context-instance-arguments-of-rendering-functions"></span><h3><tt class="docutils literal"><span class="pre">dictionary</span></tt> and <tt class="docutils literal"><span class="pre">context_instance</span></tt> arguments of rendering functions<a class="headerlink" href="#dictionary-and-context-instance-arguments-of-rendering-functions" title="Permalink to this headline">¶</a></h3>
<p>The following functions will no longer accept the <tt class="docutils literal"><span class="pre">dictionary</span></tt> and
<tt class="docutils literal"><span class="pre">context_instance</span></tt> parameters in Django 2.0:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">django.shortcuts.render()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.shortcuts.render_to_response()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.template.loader.render_to_string()</span></tt></li>
</ul>
<p>Use the <tt class="docutils literal"><span class="pre">context</span></tt> parameter instead. When <tt class="docutils literal"><span class="pre">dictionary</span></tt> is passed as a
positional argument, which is the most common idiom, no changes are needed.</p>
<p>If you&#8217;re passing a <a class="reference internal" href="../ref/templates/api.html#django.template.Context" title="django.template.Context"><tt class="xref py py-class docutils literal"><span class="pre">Context</span></tt></a> in <tt class="docutils literal"><span class="pre">context_instance</span></tt>,
pass a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> in the <tt class="docutils literal"><span class="pre">context</span></tt> parameter instead. If you&#8217;re passing a
<a class="reference internal" href="../ref/templates/api.html#django.template.RequestContext" title="django.template.RequestContext"><tt class="xref py py-class docutils literal"><span class="pre">RequestContext</span></tt></a>, pass the request separately in the
<tt class="docutils literal"><span class="pre">request</span></tt> parameter.</p>
</div>
<div class="section" id="s-dirs-argument-of-template-finding-functions">
<span id="dirs-argument-of-template-finding-functions"></span><h3><tt class="docutils literal"><span class="pre">dirs</span></tt> argument of template-finding functions<a class="headerlink" href="#dirs-argument-of-template-finding-functions" title="Permalink to this headline">¶</a></h3>
<p>The following functions will no longer accept a <tt class="docutils literal"><span class="pre">dirs</span></tt> parameter to override
<tt class="docutils literal"><span class="pre">TEMPLATE_DIRS</span></tt> in Django 2.0:</p>
<ul class="simple">
<li><a class="reference internal" href="../topics/templates.html#django.template.loader.get_template" title="django.template.loader.get_template"><tt class="xref py py-func docutils literal"><span class="pre">django.template.loader.get_template()</span></tt></a></li>
<li><a class="reference internal" href="../topics/templates.html#django.template.loader.select_template" title="django.template.loader.select_template"><tt class="xref py py-func docutils literal"><span class="pre">django.template.loader.select_template()</span></tt></a></li>
<li><a class="reference internal" href="../topics/http/shortcuts.html#django.shortcuts.render" title="django.shortcuts.render"><tt class="xref py py-func docutils literal"><span class="pre">django.shortcuts.render()</span></tt></a></li>
<li><a class="reference internal" href="../topics/http/shortcuts.html#django.shortcuts.render_to_response" title="django.shortcuts.render_to_response"><tt class="xref py py-func docutils literal"><span class="pre">django.shortcuts.render_to_response()</span></tt></a></li>
</ul>
<p>The parameter didn&#8217;t work consistently across different template loaders and
didn&#8217;t work for included templates.</p>
</div>
<div class="section" id="s-django-template-loader-baseloader">
<span id="django-template-loader-baseloader"></span><h3><tt class="docutils literal"><span class="pre">django.template.loader.BaseLoader</span></tt><a class="headerlink" href="#django-template-loader-baseloader" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">django.template.loader.BaseLoader</span></tt> was renamed to
<tt class="docutils literal"><span class="pre">django.template.loaders.base.Loader</span></tt>. If you&#8217;ve written a custom template
loader that inherits <tt class="docutils literal"><span class="pre">BaseLoader</span></tt>, you must inherit <tt class="docutils literal"><span class="pre">Loader</span></tt> instead.</p>
</div>
<div class="section" id="s-django-test-utils-testtemplateloader">
<span id="django-test-utils-testtemplateloader"></span><h3><tt class="docutils literal"><span class="pre">django.test.utils.TestTemplateLoader</span></tt><a class="headerlink" href="#django-test-utils-testtemplateloader" title="Permalink to this headline">¶</a></h3>
<p>Private API <tt class="docutils literal"><span class="pre">django.test.utils.TestTemplateLoader</span></tt> is deprecated in favor of
<tt class="docutils literal"><span class="pre">django.template.loaders.locmem.Loader</span></tt> and will be removed in Django 1.9.</p>
</div>
<div class="section" id="s-support-for-the-max-length-argument-on-custom-storage-classes">
<span id="s-storage-max-length-update"></span><span id="support-for-the-max-length-argument-on-custom-storage-classes"></span><span id="storage-max-length-update"></span><h3>Support for the <tt class="docutils literal"><span class="pre">max_length</span></tt> argument on custom <tt class="docutils literal"><span class="pre">Storage</span></tt> classes<a class="headerlink" href="#support-for-the-max-length-argument-on-custom-storage-classes" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">Storage</span></tt> subclasses should add <tt class="docutils literal"><span class="pre">max_length=None</span></tt> as a parameter to
<a class="reference internal" href="../ref/files/storage.html#django.core.files.storage.Storage.get_available_name" title="django.core.files.storage.Storage.get_available_name"><tt class="xref py py-meth docutils literal"><span class="pre">get_available_name()</span></tt></a> and/or
<a class="reference internal" href="../ref/files/storage.html#django.core.files.storage.Storage.save" title="django.core.files.storage.Storage.save"><tt class="xref py py-meth docutils literal"><span class="pre">save()</span></tt></a> if they override either method.
Support for storages that do not accept this argument will be removed in
Django 2.0.</p>
</div>
<div class="section" id="s-qn-replaced-by-compiler">
<span id="qn-replaced-by-compiler"></span><h3><tt class="docutils literal"><span class="pre">qn</span></tt> replaced by <tt class="docutils literal"><span class="pre">compiler</span></tt><a class="headerlink" href="#qn-replaced-by-compiler" title="Permalink to this headline">¶</a></h3>
<p>In previous Django versions, various internal ORM methods (mostly <tt class="docutils literal"><span class="pre">as_sql</span></tt>
methods) accepted a <tt class="docutils literal"><span class="pre">qn</span></tt> (for &#8220;quote name&#8221;) argument, which was a reference
to a function that quoted identifiers for sending to the database. In Django
1.8, that argument has been renamed to <tt class="docutils literal"><span class="pre">compiler</span></tt> and is now a full
<tt class="docutils literal"><span class="pre">SQLCompiler</span></tt> instance. For backwards-compatibility, calling a
<tt class="docutils literal"><span class="pre">SQLCompiler</span></tt> instance performs the same name-quoting that the <tt class="docutils literal"><span class="pre">qn</span></tt>
function used to. However, this backwards-compatibility shim is immediately
deprecated: you should rename your <tt class="docutils literal"><span class="pre">qn</span></tt> arguments to <tt class="docutils literal"><span class="pre">compiler</span></tt>, and call
<tt class="docutils literal"><span class="pre">compiler.quote_name_unless_alias(...)</span></tt> where you previously called
<tt class="docutils literal"><span class="pre">qn(...)</span></tt>.</p>
</div>
<div class="section" id="s-default-value-of-redirectview-permanent">
<span id="default-value-of-redirectview-permanent"></span><h3>Default value of <tt class="docutils literal"><span class="pre">RedirectView.permanent</span></tt><a class="headerlink" href="#default-value-of-redirectview-permanent" title="Permalink to this headline">¶</a></h3>
<p>The default value of the
<a class="reference internal" href="../ref/class-based-views/base.html#django.views.generic.base.RedirectView.permanent" title="django.views.generic.base.RedirectView.permanent"><tt class="xref py py-attr docutils literal"><span class="pre">RedirectView.permanent</span></tt></a>
attribute will change from <tt class="docutils literal"><span class="pre">True</span></tt> to <tt class="docutils literal"><span class="pre">False</span></tt> in Django 1.9.</p>
</div>
<div class="section" id="s-using-authenticationmiddleware-without-sessionauthenticationmiddleware">
<span id="using-authenticationmiddleware-without-sessionauthenticationmiddleware"></span><h3>Using <tt class="docutils literal"><span class="pre">AuthenticationMiddleware</span></tt> without <tt class="docutils literal"><span class="pre">SessionAuthenticationMiddleware</span></tt><a class="headerlink" href="#using-authenticationmiddleware-without-sessionauthenticationmiddleware" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../ref/middleware.html#django.contrib.auth.middleware.SessionAuthenticationMiddleware" title="django.contrib.auth.middleware.SessionAuthenticationMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">django.contrib.auth.middleware.SessionAuthenticationMiddleware</span></tt></a> was
added in Django 1.7. In Django 1.7.2, its functionality was moved to
<tt class="docutils literal"><span class="pre">auth.get_user()</span></tt> and, for backwards compatibility, enabled only if
<tt class="docutils literal"><span class="pre">'django.contrib.auth.middleware.SessionAuthenticationMiddleware'</span></tt> appears in
<a class="reference internal" href="../ref/settings.html#std:setting-MIDDLEWARE_CLASSES"><tt class="xref std std-setting docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt></a>.</p>
<p>In Django 2.0, session verification will be enabled regardless of whether or not
<tt class="docutils literal"><span class="pre">SessionAuthenticationMiddleware</span></tt> is enabled (at which point
<tt class="docutils literal"><span class="pre">SessionAuthenticationMiddleware</span></tt> will have no significance). You can add it
to your <tt class="docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt> sometime before then to opt-in. Please read the
<a class="reference internal" href="../topics/auth/default.html#session-invalidation-on-password-change"><em>upgrade considerations</em></a> first.</p>
</div>
<div class="section" id="s-django-contrib-sitemaps-flatpagesitemap">
<span id="django-contrib-sitemaps-flatpagesitemap"></span><h3><tt class="docutils literal"><span class="pre">django.contrib.sitemaps.FlatPageSitemap</span></tt><a class="headerlink" href="#django-contrib-sitemaps-flatpagesitemap" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">django.contrib.sitemaps.FlatPageSitemap</span></tt> has moved to
<tt class="docutils literal"><span class="pre">django.contrib.flatpages.sitemaps.FlatPageSitemap</span></tt>. The old import location
is deprecated and will be removed in Django 1.9.</p>
</div>
<div class="section" id="s-model-field-related">
<span id="model-field-related"></span><h3>Model <tt class="docutils literal"><span class="pre">Field.related</span></tt><a class="headerlink" href="#model-field-related" title="Permalink to this headline">¶</a></h3>
<p>Private attribute <tt class="docutils literal"><span class="pre">django.db.models.Field.related</span></tt> is deprecated in favor
of <tt class="docutils literal"><span class="pre">Field.rel</span></tt>.  The latter is an instance of
<tt class="docutils literal"><span class="pre">django.db.models.fields.related.ForeignObjectRel</span></tt> which replaces
<tt class="docutils literal"><span class="pre">django.db.models.related.RelatedObject</span></tt>. The <tt class="docutils literal"><span class="pre">django.db.models.related</span></tt>
module has been removed and the <tt class="docutils literal"><span class="pre">Field.related</span></tt> attribute will be removed in
Django 2.0.</p>
</div>
<div class="section" id="s-ssi-template-tag">
<span id="ssi-template-tag"></span><h3><tt class="docutils literal"><span class="pre">ssi</span></tt> template tag<a class="headerlink" href="#ssi-template-tag" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-ssi"><tt class="xref std std-ttag docutils literal"><span class="pre">ssi</span></tt></a> template tag allows files to be included in a template by
absolute path. This is of limited use in most deployment situations, and
the <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-include"><tt class="xref std std-ttag docutils literal"><span class="pre">include</span></tt></a> tag often makes more sense. This tag is now deprecated and
will be removed in Django 2.0.</p>
</div>
<div class="section" id="s-as-comparison-operator-in-if-template-tag">
<span id="as-comparison-operator-in-if-template-tag"></span><h3><tt class="docutils literal"><span class="pre">=</span></tt> as comparison operator in <tt class="docutils literal"><span class="pre">if</span></tt> template tag<a class="headerlink" href="#as-comparison-operator-in-if-template-tag" title="Permalink to this headline">¶</a></h3>
<p>Using a single equals sign with the <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">%}</span></tt> template tag for equality
testing was undocumented and untested. It&#8217;s now deprecated in favor of <tt class="docutils literal"><span class="pre">==</span></tt>.</p>
</div>
<div class="section" id="s-foo-s-syntax-in-modelformmixin-success-url">
<span id="foo-s-syntax-in-modelformmixin-success-url"></span><h3><tt class="docutils literal"><span class="pre">%(&lt;foo&gt;)s</span></tt> syntax in <tt class="docutils literal"><span class="pre">ModelFormMixin.success_url</span></tt><a class="headerlink" href="#foo-s-syntax-in-modelformmixin-success-url" title="Permalink to this headline">¶</a></h3>
<p>The legacy <tt class="docutils literal"><span class="pre">%(&lt;foo&gt;)s</span></tt> syntax in <a class="reference internal" href="../ref/class-based-views/mixins-editing.html#django.views.generic.edit.ModelFormMixin.success_url" title="django.views.generic.edit.ModelFormMixin.success_url"><tt class="xref py py-attr docutils literal"><span class="pre">ModelFormMixin.success_url</span></tt></a> is deprecated and
will be removed in Django 2.0.</p>
</div>
<div class="section" id="s-geoqueryset-aggregate-methods">
<span id="geoqueryset-aggregate-methods"></span><h3><tt class="docutils literal"><span class="pre">GeoQuerySet</span></tt> aggregate methods<a class="headerlink" href="#geoqueryset-aggregate-methods" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">collect()</span></tt>, <tt class="docutils literal"><span class="pre">extent()</span></tt>, <tt class="docutils literal"><span class="pre">extent3d()</span></tt>, <tt class="docutils literal"><span class="pre">makeline()</span></tt>, and <tt class="docutils literal"><span class="pre">union()</span></tt>
aggregate methods are deprecated and should be replaced by their function-based
aggregate equivalents (<tt class="docutils literal"><span class="pre">Collect</span></tt>, <tt class="docutils literal"><span class="pre">Extent</span></tt>, <tt class="docutils literal"><span class="pre">Extent3D</span></tt>, <tt class="docutils literal"><span class="pre">MakeLine</span></tt>, and
<tt class="docutils literal"><span class="pre">Union</span></tt>).</p>
</div>
<div class="section" id="s-signature-of-the-allow-migrate-router-method">
<span id="s-deprecated-signature-of-allow-migrate"></span><span id="signature-of-the-allow-migrate-router-method"></span><span id="deprecated-signature-of-allow-migrate"></span><h3>Signature of the <tt class="docutils literal"><span class="pre">allow_migrate</span></tt> router method<a class="headerlink" href="#signature-of-the-allow-migrate-router-method" title="Permalink to this headline">¶</a></h3>
<p>The signature of the <a class="reference internal" href="../topics/db/multi-db.html#allow_migrate" title="allow_migrate"><tt class="xref py py-meth docutils literal"><span class="pre">allow_migrate()</span></tt></a> method of database routers has
changed from <tt class="docutils literal"><span class="pre">allow_migrate(db,</span> <span class="pre">model)</span></tt> to
<tt class="docutils literal"><span class="pre">allow_migrate(db,</span> <span class="pre">app_label,</span> <span class="pre">model_name=None,</span> <span class="pre">**hints)</span></tt>.</p>
<p>When <tt class="docutils literal"><span class="pre">model_name</span></tt> is set, the value that was previously given through the
<tt class="docutils literal"><span class="pre">model</span></tt> positional argument may now be found inside the <tt class="docutils literal"><span class="pre">hints</span></tt> dictionary
under the key <tt class="docutils literal"><span class="pre">'model'</span></tt>.</p>
<p>After switching to the new signature the router will also be called by the
<a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RunPython" title="django.db.migrations.operations.RunPython"><tt class="xref py py-class docutils literal"><span class="pre">RunPython</span></tt></a> and
<a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RunSQL" title="django.db.migrations.operations.RunSQL"><tt class="xref py py-class docutils literal"><span class="pre">RunSQL</span></tt></a> operations.</p>
</div>
</div>
<div class="section" id="s-features-removed-in-1-8">
<span id="features-removed-in-1-8"></span><h2>Features removed in 1.8<a class="headerlink" href="#features-removed-in-1-8" title="Permalink to this headline">¶</a></h2>
<p>These features have reached the end of their deprecation cycle and so have been
removed in Django 1.8 (please see the <a class="reference internal" href="../internals/deprecation.html#deprecation-removed-in-1-8"><em>deprecation timeline</em></a> for more details):</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">django.contrib.comments</span></tt> is removed.</li>
<li>The following transaction management APIs are removed:<ul>
<li><tt class="docutils literal"><span class="pre">TransactionMiddleware</span></tt></li>
<li>the decorators and context managers <tt class="docutils literal"><span class="pre">autocommit</span></tt>, <tt class="docutils literal"><span class="pre">commit_on_success</span></tt>,
and <tt class="docutils literal"><span class="pre">commit_manually</span></tt>, defined in <tt class="docutils literal"><span class="pre">django.db.transaction</span></tt></li>
<li>the functions <tt class="docutils literal"><span class="pre">commit_unless_managed</span></tt> and <tt class="docutils literal"><span class="pre">rollback_unless_managed</span></tt>,
also defined in <tt class="docutils literal"><span class="pre">django.db.transaction</span></tt></li>
<li>the <tt class="docutils literal"><span class="pre">TRANSACTIONS_MANAGED</span></tt> setting</li>
</ul>
</li>
<li>The <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-cycle"><tt class="xref std std-ttag docutils literal"><span class="pre">cycle</span></tt></a> and <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-firstof"><tt class="xref std std-ttag docutils literal"><span class="pre">firstof</span></tt></a> template tags auto-escape their
arguments.</li>
<li>The <tt class="docutils literal"><span class="pre">SEND_BROKEN_LINK_EMAILS</span></tt> setting is removed.</li>
<li><tt class="docutils literal"><span class="pre">django.middleware.doc.XViewMiddleware</span></tt> is removed.</li>
<li>The <tt class="docutils literal"><span class="pre">Model._meta.module_name</span></tt> alias is removed.</li>
<li>The backward compatible shims introduced to rename <tt class="docutils literal"><span class="pre">get_query_set</span></tt>
and similar queryset methods are removed. This affects the following classes:
<tt class="docutils literal"><span class="pre">BaseModelAdmin</span></tt>, <tt class="docutils literal"><span class="pre">ChangeList</span></tt>, <tt class="docutils literal"><span class="pre">BaseCommentNode</span></tt>,
<tt class="docutils literal"><span class="pre">GenericForeignKey</span></tt>, <tt class="docutils literal"><span class="pre">Manager</span></tt>, <tt class="docutils literal"><span class="pre">SingleRelatedObjectDescriptor</span></tt> and
<tt class="docutils literal"><span class="pre">ReverseSingleRelatedObjectDescriptor</span></tt>.</li>
<li>The backward compatible shims introduced to rename the attributes
<tt class="docutils literal"><span class="pre">ChangeList.root_query_set</span></tt> and <tt class="docutils literal"><span class="pre">ChangeList.query_set</span></tt> are removed.</li>
<li><tt class="docutils literal"><span class="pre">django.views.defaults.shortcut</span></tt> and <tt class="docutils literal"><span class="pre">django.conf.urls.shortcut</span></tt> are
removed.</li>
<li>Support for the Python Imaging Library (PIL) module is removed.</li>
<li>The following private APIs are removed:<ul>
<li><tt class="docutils literal"><span class="pre">django.db.backend</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.db.close_connection()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.db.backends.creation.BaseDatabaseCreation.set_autocommit()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.db.transaction.is_managed()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.db.transaction.managed()</span></tt></li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">django.forms.widgets.RadioInput</span></tt> is removed.</li>
<li>The module <tt class="docutils literal"><span class="pre">django.test.simple</span></tt> and the class
<tt class="docutils literal"><span class="pre">django.test.simple.DjangoTestSuiteRunner</span></tt> are removed.</li>
<li>The module <tt class="docutils literal"><span class="pre">django.test._doctest</span></tt> is removed.</li>
<li>The <tt class="docutils literal"><span class="pre">CACHE_MIDDLEWARE_ANONYMOUS_ONLY</span></tt> setting is removed. This change
affects both <tt class="docutils literal"><span class="pre">django.middleware.cache.CacheMiddleware</span></tt> and
<tt class="docutils literal"><span class="pre">django.middleware.cache.UpdateCacheMiddleware</span></tt> despite the lack of a
deprecation warning in the latter class.</li>
<li>Usage of the hard-coded <em>Hold down &#8220;Control&#8221;, or &#8220;Command&#8221; on a Mac, to select
more than one.</em> string to override or append to user-provided <tt class="docutils literal"><span class="pre">help_text</span></tt> in
forms for <tt class="docutils literal"><span class="pre">ManyToMany</span></tt> model fields is not be performed by Django anymore
either at the model or forms layer.</li>
<li>The <tt class="docutils literal"><span class="pre">Model._meta.get_(add|change|delete)_permission</span></tt> methods are removed.</li>
<li>The session key <tt class="docutils literal"><span class="pre">django_language</span></tt> is no longer read for backwards
compatibility.</li>
<li>Geographic Sitemaps are removed
(<tt class="docutils literal"><span class="pre">django.contrib.gis.sitemaps.views.index</span></tt> and
<tt class="docutils literal"><span class="pre">django.contrib.gis.sitemaps.views.sitemap</span></tt>).</li>
<li><tt class="docutils literal"><span class="pre">django.utils.html.fix_ampersands</span></tt>, the <tt class="docutils literal"><span class="pre">fix_ampersands</span></tt> template filter,
and <tt class="docutils literal"><span class="pre">django.utils.html.clean_html</span></tt> are removed.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Django 1.8 release notes</a><ul>
<li><a class="reference internal" href="#python-compatibility">Python compatibility</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-1-8">What&#8217;s new in Django 1.8</a><ul>
<li><a class="reference internal" href="#model-meta-api"><tt class="docutils literal"><span class="pre">Model._meta</span></tt> API</a></li>
<li><a class="reference internal" href="#multiple-template-engines">Multiple template engines</a></li>
<li><a class="reference internal" href="#security-enhancements">Security enhancements</a></li>
<li><a class="reference internal" href="#new-postgresql-specific-functionality">New PostgreSQL specific functionality</a></li>
<li><a class="reference internal" href="#new-data-types">New data types</a></li>
<li><a class="reference internal" href="#query-expressions-conditional-expressions-and-database-functions">Query Expressions, Conditional Expressions, and Database Functions</a></li>
<li><a class="reference internal" href="#testcase-data-setup"><tt class="docutils literal"><span class="pre">TestCase</span></tt> data setup</a></li>
<li><a class="reference internal" href="#minor-features">Minor features</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><tt class="docutils literal"><span class="pre">django.contrib.admin</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-admindocs"><tt class="docutils literal"><span class="pre">django.contrib.admindocs</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><tt class="docutils literal"><span class="pre">django.contrib.auth</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><tt class="docutils literal"><span class="pre">django.contrib.gis</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-sessions"><tt class="docutils literal"><span class="pre">django.contrib.sessions</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-sitemaps"><tt class="docutils literal"><span class="pre">django.contrib.sitemaps</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-sites"><tt class="docutils literal"><span class="pre">django.contrib.sites</span></tt></a></li>
<li><a class="reference internal" href="#cache">Cache</a></li>
<li><a class="reference internal" href="#cryptography">Cryptography</a></li>
<li><a class="reference internal" href="#database-backends">Database backends</a></li>
<li><a class="reference internal" href="#email">Email</a></li>
<li><a class="reference internal" href="#file-storage">File Storage</a></li>
<li><a class="reference internal" href="#forms">Forms</a></li>
<li><a class="reference internal" href="#generic-views">Generic Views</a></li>
<li><a class="reference internal" href="#internationalization">Internationalization</a></li>
<li><a class="reference internal" href="#logging">Logging</a></li>
<li><a class="reference internal" href="#management-commands">Management Commands</a></li>
<li><a class="reference internal" href="#middleware">Middleware</a></li>
<li><a class="reference internal" href="#migrations">Migrations</a></li>
<li><a class="reference internal" href="#models">Models</a></li>
<li><a class="reference internal" href="#signals">Signals</a></li>
<li><a class="reference internal" href="#system-check-framework">System Check Framework</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#requests-and-responses">Requests and Responses</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
<li><a class="reference internal" href="#validators">Validators</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-1-8">Backwards incompatible changes in 1.8</a><ul>
<li><a class="reference internal" href="#related-object-operations-are-run-in-a-transaction">Related object operations are run in a transaction</a></li>
<li><a class="reference internal" href="#assigning-unsaved-objects-to-relations-raises-an-error">Assigning unsaved objects to relations raises an error</a></li>
<li><a class="reference internal" href="#management-commands-that-only-accept-positional-arguments">Management commands that only accept positional arguments</a></li>
<li><a class="reference internal" href="#custom-test-management-command-arguments-through-test-runner">Custom test management command arguments through test runner</a></li>
<li><a class="reference internal" href="#model-check-ensures-auto-generated-column-names-are-within-limits-specified-by-database">Model check ensures auto-generated column names are within limits specified by database</a></li>
<li><a class="reference internal" href="#query-relation-lookups-now-check-object-types">Query relation lookups now check object types</a></li>
<li><a class="reference internal" href="#select-related-now-checks-given-fields"><tt class="docutils literal"><span class="pre">select_related()</span></tt> now checks given fields</a></li>
<li><a class="reference internal" href="#default-emailfield-max-length-increased-to-254">Default <tt class="docutils literal"><span class="pre">EmailField.max_length</span></tt> increased to 254</a></li>
<li><a class="reference internal" href="#support-for-postgresql-versions-older-than-9-0">Support for PostgreSQL versions older than 9.0</a></li>
<li><a class="reference internal" href="#support-for-mysql-versions-older-than-5-5">Support for MySQL versions older than 5.5</a></li>
<li><a class="reference internal" href="#support-for-oracle-versions-older-than-11-1">Support for Oracle versions older than 11.1</a></li>
<li><a class="reference internal" href="#specific-privileges-used-instead-of-roles-for-tests-on-oracle">Specific privileges used instead of roles for tests on Oracle</a></li>
<li><a class="reference internal" href="#abstractuser-last-login-allows-null-values"><tt class="docutils literal"><span class="pre">AbstractUser.last_login</span></tt> allows null values</a></li>
<li><a class="reference internal" href="#id1"><tt class="docutils literal"><span class="pre">django.contrib.gis</span></tt></a></li>
<li><a class="reference internal" href="#priority-of-context-processors-for-templateresponse-brought-in-line-with-render">Priority of context processors for <tt class="docutils literal"><span class="pre">TemplateResponse</span></tt> brought in line with <tt class="docutils literal"><span class="pre">render</span></tt></a></li>
<li><a class="reference internal" href="#overriding-setupclass-teardownclass-in-test-cases">Overriding <tt class="docutils literal"><span class="pre">setUpClass</span></tt> / <tt class="docutils literal"><span class="pre">tearDownClass</span></tt> in test cases</a></li>
<li><a class="reference internal" href="#removal-of-django-contrib-formtools">Removal of <tt class="docutils literal"><span class="pre">django.contrib.formtools</span></tt></a></li>
<li><a class="reference internal" href="#database-connection-reloading-between-tests">Database connection reloading between tests</a></li>
<li><a class="reference internal" href="#cleanup-of-the-django-template-namespace">Cleanup of the <tt class="docutils literal"><span class="pre">django.template</span></tt> namespace</a></li>
<li><a class="reference internal" href="#model-attribute-on-private-model-relations"><tt class="docutils literal"><span class="pre">model</span></tt> attribute on private model relations</a></li>
<li><a class="reference internal" href="#database-backend-api">Database backend API</a></li>
<li><a class="reference internal" href="#id2"><tt class="docutils literal"><span class="pre">django.contrib.admin</span></tt></a></li>
<li><a class="reference internal" href="#default-autoescaping-of-functions-in-django-template-defaultfilters">Default autoescaping of functions in <tt class="docutils literal"><span class="pre">django.template.defaultfilters</span></tt></a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-1-8">Features deprecated in 1.8</a><ul>
<li><a class="reference internal" href="#selected-methods-in-django-db-models-options-options">Selected methods in <tt class="docutils literal"><span class="pre">django.db.models.options.Options</span></tt></a></li>
<li><a class="reference internal" href="#loading-cycle-and-firstof-template-tags-from-future-library">Loading <tt class="docutils literal"><span class="pre">cycle</span></tt> and <tt class="docutils literal"><span class="pre">firstof</span></tt> template tags from <tt class="docutils literal"><span class="pre">future</span></tt> library</a></li>
<li><a class="reference internal" href="#django-conf-urls-patterns"><tt class="docutils literal"><span class="pre">django.conf.urls.patterns()</span></tt></a></li>
<li><a class="reference internal" href="#passing-a-string-as-view-to-url">Passing a string as <tt class="docutils literal"><span class="pre">view</span></tt> to <tt class="docutils literal"><span class="pre">url()</span></tt></a></li>
<li><a class="reference internal" href="#template-related-settings">Template-related settings</a></li>
<li><a class="reference internal" href="#django-core-context-processors"><tt class="docutils literal"><span class="pre">django.core.context_processors</span></tt></a></li>
<li><a class="reference internal" href="#django-test-simpletestcase-urls"><tt class="docutils literal"><span class="pre">django.test.SimpleTestCase.urls</span></tt></a></li>
<li><a class="reference internal" href="#prefix-argument-to-i18n-patterns"><tt class="docutils literal"><span class="pre">prefix</span></tt> argument to <tt class="docutils literal"><span class="pre">i18n_patterns()</span></tt></a></li>
<li><a class="reference internal" href="#using-an-incorrect-count-of-unpacked-values-in-the-for-template-tag">Using an incorrect count of unpacked values in the <tt class="docutils literal"><span class="pre">for</span></tt> template tag</a></li>
<li><a class="reference internal" href="#passing-a-dotted-path-to-reverse-and-url">Passing a dotted path to <tt class="docutils literal"><span class="pre">reverse()</span></tt> and <tt class="docutils literal"><span class="pre">url</span></tt></a></li>
<li><a class="reference internal" href="#aggregate-methods-and-modules">Aggregate methods and modules</a></li>
<li><a class="reference internal" href="#extending-management-command-arguments-through-command-option-list">Extending management command arguments through <tt class="docutils literal"><span class="pre">Command.option_list</span></tt></a></li>
<li><a class="reference internal" href="#django-core-management-noargscommand"><tt class="docutils literal"><span class="pre">django.core.management.NoArgsCommand</span></tt></a></li>
<li><a class="reference internal" href="#listing-all-migrations-in-a-project">Listing all migrations in a project</a></li>
<li><a class="reference internal" href="#cache-choices-option-of-modelchoicefield-and-modelmultiplechoicefield"><tt class="docutils literal"><span class="pre">cache_choices</span></tt> option of <tt class="docutils literal"><span class="pre">ModelChoiceField</span></tt> and <tt class="docutils literal"><span class="pre">ModelMultipleChoiceField</span></tt></a></li>
<li><a class="reference internal" href="#django-template-resolve-variable"><tt class="docutils literal"><span class="pre">django.template.resolve_variable()</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-webdesign"><tt class="docutils literal"><span class="pre">django.contrib.webdesign</span></tt></a></li>
<li><a class="reference internal" href="#error-message-argument-to-django-forms-regexfield"><tt class="docutils literal"><span class="pre">error_message</span></tt> argument to <tt class="docutils literal"><span class="pre">django.forms.RegexField</span></tt></a></li>
<li><a class="reference internal" href="#old-unordered-list-syntax">Old <tt class="docutils literal"><span class="pre">unordered_list</span></tt> syntax</a></li>
<li><a class="reference internal" href="#django-forms-field-has-changed"><tt class="docutils literal"><span class="pre">django.forms.Field._has_changed()</span></tt></a></li>
<li><a class="reference internal" href="#django-utils-html-remove-tags-and-removetags-template-filter"><tt class="docutils literal"><span class="pre">django.utils.html.remove_tags()</span></tt> and <tt class="docutils literal"><span class="pre">removetags</span></tt> template filter</a></li>
<li><a class="reference internal" href="#is-admin-site-argument-to-django-contrib-auth-views-password-reset"><tt class="docutils literal"><span class="pre">is_admin_site</span></tt> argument to <tt class="docutils literal"><span class="pre">django.contrib.auth.views.password_reset()</span></tt></a></li>
<li><a class="reference internal" href="#subfieldbase"><tt class="docutils literal"><span class="pre">SubfieldBase</span></tt></a></li>
<li><a class="reference internal" href="#django-utils-checksums"><tt class="docutils literal"><span class="pre">django.utils.checksums</span></tt></a></li>
<li><a class="reference internal" href="#inlineadminform-original-content-type-id"><tt class="docutils literal"><span class="pre">InlineAdminForm.original_content_type_id</span></tt></a></li>
<li><a class="reference internal" href="#django-views-generic-edit-formmixin-get-form-s-form-class-argument"><tt class="docutils literal"><span class="pre">django.views.generic.edit.FormMixin.get_form()</span></tt>’s <tt class="docutils literal"><span class="pre">form_class</span></tt> argument</a></li>
<li><a class="reference internal" href="#rendering-templates-loaded-by-get-template-with-a-context">Rendering templates loaded by <tt class="docutils literal"><span class="pre">get_template()</span></tt> with a <tt class="docutils literal"><span class="pre">Context</span></tt></a></li>
<li><a class="reference internal" href="#template-and-context-classes-in-template-responses"><tt class="docutils literal"><span class="pre">Template</span></tt> and <tt class="docutils literal"><span class="pre">Context</span></tt> classes in template responses</a></li>
<li><a class="reference internal" href="#current-app-argument-of-template-related-apis"><tt class="docutils literal"><span class="pre">current_app</span></tt> argument of template-related APIs</a></li>
<li><a class="reference internal" href="#dictionary-and-context-instance-arguments-of-rendering-functions"><tt class="docutils literal"><span class="pre">dictionary</span></tt> and <tt class="docutils literal"><span class="pre">context_instance</span></tt> arguments of rendering functions</a></li>
<li><a class="reference internal" href="#dirs-argument-of-template-finding-functions"><tt class="docutils literal"><span class="pre">dirs</span></tt> argument of template-finding functions</a></li>
<li><a class="reference internal" href="#django-template-loader-baseloader"><tt class="docutils literal"><span class="pre">django.template.loader.BaseLoader</span></tt></a></li>
<li><a class="reference internal" href="#django-test-utils-testtemplateloader"><tt class="docutils literal"><span class="pre">django.test.utils.TestTemplateLoader</span></tt></a></li>
<li><a class="reference internal" href="#support-for-the-max-length-argument-on-custom-storage-classes">Support for the <tt class="docutils literal"><span class="pre">max_length</span></tt> argument on custom <tt class="docutils literal"><span class="pre">Storage</span></tt> classes</a></li>
<li><a class="reference internal" href="#qn-replaced-by-compiler"><tt class="docutils literal"><span class="pre">qn</span></tt> replaced by <tt class="docutils literal"><span class="pre">compiler</span></tt></a></li>
<li><a class="reference internal" href="#default-value-of-redirectview-permanent">Default value of <tt class="docutils literal"><span class="pre">RedirectView.permanent</span></tt></a></li>
<li><a class="reference internal" href="#using-authenticationmiddleware-without-sessionauthenticationmiddleware">Using <tt class="docutils literal"><span class="pre">AuthenticationMiddleware</span></tt> without <tt class="docutils literal"><span class="pre">SessionAuthenticationMiddleware</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-sitemaps-flatpagesitemap"><tt class="docutils literal"><span class="pre">django.contrib.sitemaps.FlatPageSitemap</span></tt></a></li>
<li><a class="reference internal" href="#model-field-related">Model <tt class="docutils literal"><span class="pre">Field.related</span></tt></a></li>
<li><a class="reference internal" href="#ssi-template-tag"><tt class="docutils literal"><span class="pre">ssi</span></tt> template tag</a></li>
<li><a class="reference internal" href="#as-comparison-operator-in-if-template-tag"><tt class="docutils literal"><span class="pre">=</span></tt> as comparison operator in <tt class="docutils literal"><span class="pre">if</span></tt> template tag</a></li>
<li><a class="reference internal" href="#foo-s-syntax-in-modelformmixin-success-url"><tt class="docutils literal"><span class="pre">%(&lt;foo&gt;)s</span></tt> syntax in <tt class="docutils literal"><span class="pre">ModelFormMixin.success_url</span></tt></a></li>
<li><a class="reference internal" href="#geoqueryset-aggregate-methods"><tt class="docutils literal"><span class="pre">GeoQuerySet</span></tt> aggregate methods</a></li>
<li><a class="reference internal" href="#signature-of-the-allow-migrate-router-method">Signature of the <tt class="docutils literal"><span class="pre">allow_migrate</span></tt> router method</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-removed-in-1-8">Features removed in 1.8</a></li>
</ul>
</li>
</ul>

  <h3>Browse</h3>
  <ul>
    
      <li>Prev: <a href="1.8.1.html">Django 1.8.1 release notes</a></li>
    
    
      <li>Next: <a href="1.7.8.html">Django 1.7.8 release notes</a></li>
    
  </ul>
  <h3>You are here:</h3>
  <ul>
      <li>
        <a href="../index.html">Django 1.8.2.dev20150501205246 documentation</a>
        
          <ul><li><a href="index.html">Release notes</a>
        
        <ul><li>Django 1.8 release notes</li></ul>
        </li></ul>
      </li>
  </ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/releases/1.8.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">May 02, 2015</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="1.8.1.html" title="Django 1.8.1 release notes">previous</a>
     |
    <a href="index.html" title="Release notes" accesskey="U">up</a>
   |
    <a href="1.7.8.html" title="Django 1.7.8 release notes">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>